{"ast":null,"code":"import _classCallCheck from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{getAllRecipes}from'../../actions/recipe';import Container from'@material-ui/core/Container';import'./homePage.css';import\"bootstrap/dist/css/bootstrap.min.css\";import RecipeSlideShow from'./slideshow/recipeSlideShow.component';import HomePageLeftPanel from'./leftpanel/homePageLeftPanel.component';import Navbar from'../Navbar/navbar.component';import HomePageRightPanel from'./rightpanel/homePageRightPanel.component';import RecipeList from'../recipelist/recipelist.component';import TopRecipes from\"./toprecipes/topRecipes.component\";import cakeIcon from'./images/cake.png';import pieIcon from'./images/pie.png';import pizzaIcon from'./images/pizza.png';import saladIcon from'./images/salad.png';import sandwichIcon from'./images/sandwich.png';import seafoodIcon from'./images/seafood.png';import soupIcon from'./images/soup.png';import noodlesIcon from'./images/noodles.png';// mappings between categories and id\n// 0: cake; 1: noodles; 2: pie; 3: pizza; 4: salads; 5: sandwiches; 6: seafood; 7: soup \nvar HomePage=/*#__PURE__*/function(_Component){_inherits(HomePage,_Component);var _super=_createSuper(HomePage);function HomePage(props){var _this;_classCallCheck(this,HomePage);_this=_super.call(this,props);_this.incrSlide=function(){if(_this.state.slide_idx<_this.state.num_slides-1){_this.setState({slide_idx:_this.state.slide_idx+1});}else{_this.setState({slide_idx:0});}var dots=document.getElementsByClassName(\"dot\");for(var i=0;i<dots.length;i++){dots[i].className=dots[i].className.replace(\" active\",\"\");}dots[_this.state.slide_idx].className+=\" active\";};_this.decrSlide=function(){if(_this.state.slide_idx>0){_this.setState({slide_idx:_this.state.slide_idx-1});}else{_this.setState({slide_idx:_this.state.num_slides-1});}var dots=document.getElementsByClassName(\"dot\");for(var i=0;i<dots.length;i++){dots[i].className=dots[i].className.replace(\" active\",\"\");}dots[_this.state.slide_idx].className+=\" active\";};_this.autoShowSlides=function(){_this.incrSlide();var dots=document.getElementsByClassName(\"dot\");for(var i=0;i<dots.length;i++){dots[i].className=dots[i].className.replace(\" active\",\"\");}dots[_this.state.slide_idx].className+=\" active\";};_this.clickRecipe=function(rid){_this.props.history.push(\"/viewrecipe/\"+rid);};_this.clickStar=function(rid){// require server call to update recipe information\nvar new_recipes=[];var new_displayed_recipes=[];_this.state.recipes.forEach(function(recipe){var new_recipe=Object.create(recipe);if(recipe.id===rid){if(new_recipe.collected){new_recipe.collected=false;}else{new_recipe.collected=true;}}new_recipes.push(new_recipe);});_this.setState({recipes:new_recipes});_this.state.displayed_recipes.forEach(function(recipe){var new_recipe=Object.create(recipe);if(new_recipe.id===rid){if(new_recipe.collected){new_recipe.collected=false;}else{new_recipe.collected=true;}}new_displayed_recipes.push(new_recipe);});_this.setState({displayed_recipes:new_displayed_recipes});};_this.clickHeart=function(rid){// require server call to update recipe information\nvar new_recipes=[];var new_displayed_recipes=[];_this.state.recipes.forEach(function(recipe){var new_recipe=Object.create(recipe);if(recipe.id===rid){if(new_recipe.liked){new_recipe.liked=false;new_recipe.likes--;}else{new_recipe.liked=true;new_recipe.likes++;}}new_recipes.push(new_recipe);});_this.setState({recipes:new_recipes});_this.state.displayed_recipes.forEach(function(recipe){var new_recipe=Object.create(recipe);if(new_recipe.id===rid){if(new_recipe.liked){new_recipe.liked=false;new_recipe.likes--;}else{new_recipe.liked=true;new_recipe.likes++;}}new_displayed_recipes.push(new_recipe);});_this.setState({displayed_recipes:new_displayed_recipes});// update top three recipes\nvar first_largest=0;var second_largest=0;var third_largest=0;var first_idx=0;var second_idx=0;var third_idx=0;for(var i=0;i<new_recipes.length;i++){if(new_recipes[i].likes>first_largest){third_largest=second_largest;second_largest=first_largest;first_largest=new_recipes[i].likes;first_idx=i;}else if(new_recipes[i].likes>second_largest){third_largest=second_largest;second_largest=new_recipes[i].likes;second_idx=i;}else if(new_recipes[i].likes>third_largest){third_largest=new_recipes[i].likes;third_idx=i;}}_this.setState({top3_recipe:[first_idx,second_idx,third_idx]});};_this.clickCategory=function(event){var new_categories=_this.state.categories;new_categories[event.target.name].checked=!_this.state.categories[event.target.name].checked;_this.setState({categories:new_categories});var categories_ondisplay=[];for(var i=0;i<_this.state.categories.length;i++){if(_this.state.categories[i].checked)categories_ondisplay.push(i);}// show and hide receipes\nvar new_recipes=[];for(var _i=0;_i<_this.state.recipes.length;_i++){for(var j=0;j<_this.state.recipes[_i].categories.length;j++){if(categories_ondisplay.includes(_this.state.recipes[_i].categories[j])){new_recipes.push(_this.state.recipes[_i]);break;}}}_this.setState({displayed_recipes:new_recipes});};_this.clickAll=function(e){_this.setState({all_checked:!_this.state.all_checked});var all_checked=!_this.state.all_checked;var new_categories=_this.state.categories;new_categories.forEach(function(category){category.checked=all_checked;});_this.setState({categories:new_categories});if(all_checked){_this.setState({displayed_recipes:_this.state.recipes});}else{_this.setState({displayed_recipes:[]});}};_this.slideshowGenerator=function(){if(_this.state.top3_recipe&&_this.state.top3_recipe.length){return/*#__PURE__*/React.createElement(RecipeSlideShow,{imgsrc:_this.state.recipes[_this.state.top3_recipe[_this.state.slide_idx]].filePath,imgalt:_this.state.recipes[_this.state.top3_recipe[_this.state.slide_idx]].name,imgtext:_this.state.recipes[_this.state.top3_recipe[_this.state.slide_idx]].name,decrSlide:_this.decrSlide,incrSlide:_this.incrSlide});}else{return null;}};_this.props.history.push(\"/homepage\");_this.state={slide_idx:0,num_slides:3,// this is the index into the recipes array\ntop3_recipe:[],// categories \ncategories:[{id:0,src:cakeIcon,text:'Cake',checked:true},{id:1,src:noodlesIcon,text:'Noodles',checked:true},{id:2,src:pieIcon,text:'Pie',checked:true},{id:3,src:pizzaIcon,text:'Pizza',checked:true},{id:4,src:saladIcon,text:'Salads',checked:true},{id:5,src:sandwichIcon,text:'Sandwiches',checked:true},{id:6,src:seafoodIcon,text:'Seafood',checked:true},{id:7,src:soupIcon,text:'Soup',checked:true}],all_checked:true,recipes:[],displayed_recipes:[]};getAllRecipes(_assertThisInitialized(_this));return _this;}_createClass(HomePage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.interval=setInterval(function(){_this2.autoShowSlides();},3000);// TODO: init top3_recipe\n}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.interval);}},{key:\"render\",value:function render(){var app=this.props.app;return/*#__PURE__*/React.createElement(\"div\",{id:\"body\"},/*#__PURE__*/React.createElement(Container,{maxWidth:\"md\"},/*#__PURE__*/React.createElement(Navbar,{app:app}),/*#__PURE__*/React.createElement(HomePageLeftPanel,{categories:this.state.categories,clickCategory:this.clickCategory,all_checked:this.state.all_checked,clickAll:this.clickAll}),/*#__PURE__*/React.createElement(\"div\",{id:\"middle-panel\"},/*#__PURE__*/React.createElement(this.slideshowGenerator,null),/*#__PURE__*/React.createElement(RecipeList,{recipes:this.state.displayed_recipes,clickRecipe:this.clickRecipe,clickHeart:this.clickHeart,clickStar:this.clickStar})),/*#__PURE__*/React.createElement(HomePageRightPanel,{top3_recipe:this.state.top3_recipe,recipes:this.state.recipes,clickHeart:this.clickHeart,userid:this.state.uid}),/*#__PURE__*/React.createElement(TopRecipes,{top3_recipe:this.state.top3_recipe,recipes:this.state.recipes,userid:this.state.uid})));}}]);return HomePage;}(Component);export{HomePage as default};","map":{"version":3,"sources":["/Users/FrankChen/csc309/tp/team07/client/src/components/homePage/homePage.component.js"],"names":["React","Component","getAllRecipes","Container","RecipeSlideShow","HomePageLeftPanel","Navbar","HomePageRightPanel","RecipeList","TopRecipes","cakeIcon","pieIcon","pizzaIcon","saladIcon","sandwichIcon","seafoodIcon","soupIcon","noodlesIcon","HomePage","props","incrSlide","state","slide_idx","num_slides","setState","dots","document","getElementsByClassName","i","length","className","replace","decrSlide","autoShowSlides","clickRecipe","rid","history","push","clickStar","new_recipes","new_displayed_recipes","recipes","forEach","recipe","new_recipe","Object","create","id","collected","displayed_recipes","clickHeart","liked","likes","first_largest","second_largest","third_largest","first_idx","second_idx","third_idx","top3_recipe","clickCategory","event","new_categories","categories","target","name","checked","categories_ondisplay","j","includes","clickAll","e","all_checked","category","slideshowGenerator","filePath","src","text","interval","setInterval","clearInterval","app","uid"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {getAllRecipes} from '../../actions/recipe';\nimport Container from '@material-ui/core/Container';\n\nimport './homePage.css'\nimport \"bootstrap/dist/css/bootstrap.min.css\"\nimport RecipeSlideShow from './slideshow/recipeSlideShow.component'\nimport HomePageLeftPanel from './leftpanel/homePageLeftPanel.component'\nimport Navbar from '../Navbar/navbar.component'\nimport HomePageRightPanel from './rightpanel/homePageRightPanel.component'\nimport RecipeList from '../recipelist/recipelist.component'\nimport TopRecipes from \"./toprecipes/topRecipes.component\"\n\nimport cakeIcon from './images/cake.png'\nimport pieIcon from './images/pie.png'\nimport pizzaIcon from './images/pizza.png'\nimport saladIcon from './images/salad.png'\nimport sandwichIcon from './images/sandwich.png'\nimport seafoodIcon from './images/seafood.png'\nimport soupIcon from './images/soup.png'\nimport noodlesIcon from './images/noodles.png'\n\n// mappings between categories and id\n// 0: cake; 1: noodles; 2: pie; 3: pizza; 4: salads; 5: sandwiches; 6: seafood; 7: soup \nexport default class HomePage extends Component {\n    constructor(props){\n        super(props);\n        \n        this.props.history.push(\"/homepage\");\n        \n\n        this.state = {\n            slide_idx: 0,\n            num_slides: 3,\n            // this is the index into the recipes array\n            top3_recipe: [],\n            // categories \n            categories: [\n                {id:0, src:cakeIcon, text:'Cake', checked:true},\n                {id:1, src:noodlesIcon, text:'Noodles', checked:true},\n                {id:2, src:pieIcon, text:'Pie', checked:true},\n                {id:3, src:pizzaIcon, text: 'Pizza', checked:true},\n                {id:4, src:saladIcon, text: 'Salads', checked:true},\n                {id:5, src:sandwichIcon, text:'Sandwiches', checked:true},\n                {id:6, src:seafoodIcon, text: 'Seafood', checked:true},\n                {id:7, src:soupIcon, text:'Soup', checked:true}\n            ],\n            all_checked: true,\n            recipes: [],\n            displayed_recipes: []\n        }\n        getAllRecipes(this);\n    }\n\n    componentDidMount() {\n        this.interval = setInterval(() => {\n            this.autoShowSlides();\n        }, 3000)\n\n        // TODO: init top3_recipe\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.interval);\n    }\n\n    incrSlide = () => {\n        if(this.state.slide_idx < this.state.num_slides-1){\n            this.setState({ slide_idx: this.state.slide_idx+1 });\n        } else {\n            this.setState({ slide_idx: 0 });\n        }\n        const dots = document.getElementsByClassName(\"dot\");\n        for (let i = 0; i < dots.length; i++) {\n            dots[i].className = dots[i].className.replace(\" active\", \"\");\n        }\n        dots[this.state.slide_idx].className += \" active\";\n    }\n\n    decrSlide = () => {\n        if(this.state.slide_idx > 0){\n            this.setState({ slide_idx: this.state.slide_idx-1 });\n        } else {\n            this.setState({ slide_idx: this.state.num_slides-1 });\n        }\n        const dots = document.getElementsByClassName(\"dot\");\n        for (let i = 0; i < dots.length; i++) {\n            dots[i].className = dots[i].className.replace(\" active\", \"\");\n        }\n        dots[this.state.slide_idx].className += \" active\";\n    }\n\n    autoShowSlides = () => {\n        this.incrSlide();\n        const dots = document.getElementsByClassName(\"dot\");\n        for (let i = 0; i < dots.length; i++) {\n            dots[i].className = dots[i].className.replace(\" active\", \"\");\n        }\n        dots[this.state.slide_idx].className += \" active\";\n    }\n\n    clickRecipe=(rid)=>{\n        this.props.history.push(\"/viewrecipe/\"+ rid);\n    }\n\n    clickStar=(rid)=>{\n        // require server call to update recipe information\n        const new_recipes = [];\n        const new_displayed_recipes = [];\n        this.state.recipes.forEach((recipe)=>{\n            const new_recipe = Object.create(recipe)\n            if(recipe.id === rid){\n                if(new_recipe.collected){\n                    new_recipe.collected = false;\n                }else{\n                    new_recipe.collected = true;\n                }\n            }\n            new_recipes.push(new_recipe)\n        })\n\n        this.setState({ recipes: new_recipes });\n        this.state.displayed_recipes.forEach((recipe)=>{\n            const new_recipe = Object.create(recipe)\n            if(new_recipe.id === rid){\n                if(new_recipe.collected){\n                    new_recipe.collected = false;\n                }else{\n                    new_recipe.collected = true;\n                }\n            }\n            new_displayed_recipes.push(new_recipe)\n        })\n        this.setState({ displayed_recipes: new_displayed_recipes });\n    }\n\n    clickHeart=(rid)=>{\n        // require server call to update recipe information\n        const new_recipes = [];\n        const new_displayed_recipes = [];\n        this.state.recipes.forEach((recipe)=>{\n            const new_recipe = Object.create(recipe)\n            if(recipe.id === rid){\n                if(new_recipe.liked){\n                    new_recipe.liked = false;\n                    new_recipe.likes--;\n                }else{\n                    new_recipe.liked = true;\n                    new_recipe.likes++;\n                }\n            }\n            new_recipes.push(new_recipe)\n        })\n\n        this.setState({ recipes: new_recipes });\n        this.state.displayed_recipes.forEach((recipe)=>{\n            const new_recipe = Object.create(recipe)\n            if(new_recipe.id === rid){\n                if(new_recipe.liked){\n                    new_recipe.liked = false;\n                    new_recipe.likes--;\n                }else{\n                    new_recipe.liked = true;\n                    new_recipe.likes++;\n                }\n            }\n            new_displayed_recipes.push(new_recipe)\n        })\n        this.setState({ displayed_recipes: new_displayed_recipes });\n\n        // update top three recipes\n        let first_largest = 0;\n        let second_largest = 0;\n        let third_largest = 0;\n        let first_idx = 0;\n        let second_idx = 0;\n        let third_idx = 0;\n        for(let i=0; i< new_recipes.length; i++){\n            if(new_recipes[i].likes > first_largest){\n                third_largest = second_largest;\n                second_largest = first_largest;\n                first_largest = new_recipes[i].likes;\n                first_idx = i;\n            }else if(new_recipes[i].likes > second_largest){\n                third_largest = second_largest;\n                second_largest = new_recipes[i].likes;\n                second_idx = i;\n            }else if(new_recipes[i].likes > third_largest){\n                third_largest = new_recipes[i].likes;\n                third_idx = i;\n            }\n        }\n        this.setState({ top3_recipe: [first_idx, second_idx, third_idx]})\n    }\n\n    clickCategory = (event)=>{\n        const new_categories = this.state.categories;\n        new_categories[event.target.name].checked = !this.state.categories[event.target.name].checked;\n        this.setState({ categories: new_categories});\n\n        const categories_ondisplay = []\n        for(let i = 0; i < this.state.categories.length; i++){\n            if(this.state.categories[i].checked)\n            categories_ondisplay.push(i)\n        }\n\n        // show and hide receipes\n        const new_recipes = []\n        for(let i = 0; i < this.state.recipes.length; i++){\n            for(let j = 0; j < this.state.recipes[i].categories.length; j++){\n                if(categories_ondisplay.includes(this.state.recipes[i].categories[j])){ \n                    new_recipes.push(this.state.recipes[i]);\n                    break;\n                }\n            }\n        }\n        this.setState({ displayed_recipes: new_recipes });\n    }\n\n    clickAll = (e) => {\n        this.setState({ all_checked: !this.state.all_checked})\n        let all_checked = !this.state.all_checked;\n        let new_categories = this.state.categories\n        new_categories.forEach((category)=>{category.checked = all_checked})\n        this.setState({ categories: new_categories});\n        if(all_checked){\n            this.setState({ displayed_recipes: this.state.recipes});\n        }else{\n            this.setState({ displayed_recipes: []});\n        }\n    }\n\n    slideshowGenerator=()=>{\n        if(this.state.top3_recipe && this.state.top3_recipe.length){\n            return <RecipeSlideShow \n            imgsrc={this.state.recipes[this.state.top3_recipe[this.state.slide_idx]].filePath}\n            imgalt={this.state.recipes[this.state.top3_recipe[this.state.slide_idx]].name}\n            imgtext={this.state.recipes[this.state.top3_recipe[this.state.slide_idx]].name}\n            decrSlide={this.decrSlide}\n            incrSlide={this.incrSlide}\n        />\n        }else{\n            return null;\n        }\n        \n    }\n\n    render(){\n        const { app } = this.props;\n        return(\n            <div id=\"body\">\n                \n                <Container maxWidth='md'>\n                    <Navbar app={app}/>\n                    <HomePageLeftPanel\n                        categories={this.state.categories}\n                        clickCategory={this.clickCategory}\n                        all_checked={this.state.all_checked}\n                        clickAll={this.clickAll}\n                    />                    \n\n                    <div id=\"middle-panel\">\n                        <this.slideshowGenerator/>\n                        <RecipeList \n                        recipes={this.state.displayed_recipes}\n                        clickRecipe={this.clickRecipe}\n                        clickHeart={this.clickHeart}\n                        clickStar={this.clickStar}\n                        />\n                    </div>\n\n                    <HomePageRightPanel \n                    top3_recipe={this.state.top3_recipe} \n                    recipes={this.state.recipes}\n                    clickHeart={this.clickHeart}\n                    userid={this.state.uid}\n                    />\n                    \n                    <TopRecipes\n                    top3_recipe={this.state.top3_recipe}\n                    recipes={this.state.recipes}\n                    userid={this.state.uid}\n                    />\n                </Container> \n            </div>\n        )\n    }\n} "]},"metadata":{},"sourceType":"module"}