{"ast":null,"code":"import _toConsumableArray from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./editRecipe.css';import Navbar from\"../Navbar/navbar.component\";import recipe1 from'../../recipes/butter-chicken.jpg';import{Multiselect}from'multiselect-react-dropdown';import Container from\"@material-ui/core/Container\";import Dropdown from'react-dropdown';import ImageUploader from'react-images-upload';import Col from'react-bootstrap/Col';import{getRecipe,setRecipe}from\"../../actions/recipe\";var UnitType=['(quantity)','kg','g','mg','cup(s)','teaspoon(s)','tablespoon(s)','mL','L','oz','lb(s)'];var categoriesOptions=[{name:\"Cake\",id:0},{name:\"Noodles\",id:1},{name:\"Pie\",id:2},{name:\"Pizza\",id:3},{name:\"Salads\",id:4},{name:\"Sandwiches\",id:5},{name:\"Seafood\",id:6},{name:\"Soup\",id:7}];var EditRecipe=/*#__PURE__*/function(_Component){_inherits(EditRecipe,_Component);var _super=_createSuper(EditRecipe);function EditRecipe(props){var _this;_classCallCheck(this,EditRecipe);_this=_super.call(this,props);_this.ReturnView=function(e){e.preventDefault();// server calls are required to push the updated recipe to the server\n_this.props.history.push(\"/viewrecipe/\"+_this.state.rid);};_this.onCancel=function(e){e.preventDefault();_this.props.history.push(\"/viewrecipe/\"+_this.state.rid);};_this.onSubmit=function(e){e.preventDefault();setRecipe(_this.state.rid,_assertThisInitialized(_this));};_this.onChangeRecipeName=function(e){e.preventDefault();_this.setState({name:e.target.value});};_this.onChangeDescription=function(e){e.preventDefault();_this.setState({description:e.target.value});};_this.onChangeIngredientsName=function(e,index){var ingredients=_this.state.recipe.ingredients;ingredients[index].name=e.target.value;_this.setState({ingredients:ingredients});};_this.onChangeIngredientsQuan=function(e,index){var ingredients=_this.state.recipe.ingredients;ingredients[index].quantity=e.target.value;_this.setState({ingredients:ingredients});};_this.addIngredientsRow=function(){_this.setState(function(prevState){return{ingredients:[].concat(_toConsumableArray(prevState.ingredients),[{name:\"\",quantity:\"\",unit:\"\"}])};});};_this.onChangeRemoveIngredients=function(index){_this.state.recipe.ingredients.splice(index,1);_this.setState({ingredients:_this.state.recipe.ingredients});};_this.onChangeSteps=function(e,index){var steps=_this.recipe.state.steps;steps[index]=e.target.value;_this.setState({steps:steps});};_this.addStepsRow=function(){_this.setState(function(prevState){return{steps:[].concat(_toConsumableArray(prevState.steps),[\"\"])};});};_this.onChangeRemoveSteps=function(index){_this.state.recipe.steps.splice(index,1);_this.setState({steps:_this.state.recipe.steps});};_this.onImageUpload=function(picture){_this.setState({filePath:_this.state.recipe.filePath.concat(picture)});};_this.onSelect=function(selectedList,selectedItem){var newCategories=_this.state.recipe.categories;newCategories.push(selectedItem.id);_this.setState({categories:newCategories});console.log(_this.state.recipe.categories);};_this.onRemove=function(selectedList,removedItem){var index=_this.state.recipe.categories.findIndex(function(element){return element===removedItem.id;});_this.state.recipe.categories.splice(index,1);_this.setState({categories:_this.state.recipe.categories});};_this.props.history.push('/editrecipe/'+_this.props.match.params.rid);// requires server call to fetch the recipe information\n_this.state={rid:_this.props.match.params.rid,recipe:{name:\"\",description:\"\",categories:[],ingredients:[{name:\"\",quantity:\"\",unit:\"\"}],steps:[\"\"],file:{},filePath:\"\",creatorUsername:\"\",creatorId:\"\"}};getRecipe(_assertThisInitialized(_this),_this.props.match.params.rid);return _this;}_createClass(EditRecipe,[{key:\"componentDidMount\",value:function componentDidMount(){// this is where the server calls are invoked\n// state variable is updated hereexport\n}},{key:\"render\",value:function render(){var _this2=this;var app=this.props.app;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Container,{maxWidth:\"md\"},/*#__PURE__*/React.createElement(Navbar,{app:app}),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.ReturnView,className:\"edit-recipe\"},/*#__PURE__*/React.createElement(\"b\",null,\"Edit Your Recipe\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Name: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"Name\",required:true,className:\"form-control\",value:this.state.recipe.name,onChange:this.onChangeRecipeName})),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Description: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"Description\",placeholder:\"optional\",className:\"form-control\",value:this.state.recipe.description,onChange:this.onChangeDescription})),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"label\",null,\"Cuisine Type: \"),/*#__PURE__*/React.createElement(Multiselect,{placeholder:\"Select cuisine type(s)\",options:categoriesOptions,selectedValues:categoriesOptions.filter(function(c){return _this2.state.recipe.categories.includes(c.id);}),onSelect:this.onSelect,onRemove:this.onRemove,displayValue:\"name\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"Ingredient-form\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Ingredients: \"),this.state.recipe.ingredients.map(function(ingredient,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",id:\"Ingredient-row\",key:index},/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:5},/*#__PURE__*/React.createElement(\"input\",{type:\"ingredients\",required:true,placeholder:\"name\",className:\"form-control\",value:ingredient.name,onChange:function onChange(e){return _this2.onChangeIngredientsName(e,index);}})),/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:2},/*#__PURE__*/React.createElement(\"input\",{type:\"Ingredients\",required:true,placeholder:\"quantity\",className:\"form-control\",value:ingredient.quantity,onChange:function onChange(e){return _this2.onChangeIngredientsQuan(e,index);}})),/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:3},/*#__PURE__*/React.createElement(\"select\",{class:\"form-control\",value:ingredient.unit,name:\"units\",id:\"units\",onChange:function onChange(e){return _this2.onSelectIngredientsUnit(e,index);}},/*#__PURE__*/React.createElement(\"option\",{value:UnitType[0]},UnitType[0]),/*#__PURE__*/React.createElement(\"option\",{value:UnitType[1]},UnitType[1]),/*#__PURE__*/React.createElement(\"option\",{value:UnitType[2]},UnitType[2]),/*#__PURE__*/React.createElement(\"option\",{value:UnitType[3]},UnitType[3]),/*#__PURE__*/React.createElement(\"option\",{value:UnitType[4]},UnitType[4]),/*#__PURE__*/React.createElement(\"option\",{value:UnitType[5]},UnitType[5]),/*#__PURE__*/React.createElement(\"option\",{value:UnitType[6]},UnitType[6]),/*#__PURE__*/React.createElement(\"option\",{value:UnitType[7]},UnitType[7]),/*#__PURE__*/React.createElement(\"option\",{value:UnitType[8]},UnitType[8]),/*#__PURE__*/React.createElement(\"option\",{value:UnitType[9]},UnitType[9]),/*#__PURE__*/React.createElement(\"option\",{value:UnitType[10]},UnitType[10]),/*#__PURE__*/React.createElement(\"option\",{value:UnitType[11]},UnitType[11]))),/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:1},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",id:\"remove-ingredient\",className:\"btn btn-outline-primary\",onClick:function onClick(e){return _this2.onChangeRemoveIngredients(index);}},\"Remove\")));})),/*#__PURE__*/React.createElement(\"div\",{className:\"AddIngredient-btn\"},/*#__PURE__*/React.createElement(\"button\",{id:\"add-ingredient\",className:\"btn btn-outline-primary\",type:\"button\",onClick:this.addIngredientsRow},\"Add Ingredients\")),/*#__PURE__*/React.createElement(\"div\",{className:\"Step-form\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Steps: \"),this.state.recipe.steps.map(function(step,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",key:index},/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:10},/*#__PURE__*/React.createElement(\"textarea\",{type:\"Steps\",required:true,className:\"form-control\",value:step,onChange:function onChange(e){return _this2.onChangeSteps(e,index);}})),/*#__PURE__*/React.createElement(Col,{className:\"col\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",id:\"remove-step\",className:\"btn btn-outline-primary\",onClick:function onClick(e){return _this2.onChangeRemoveSteps(index);}},\"Remove\")));})),/*#__PURE__*/React.createElement(\"div\",{className:\"AddSteps-btn\"},/*#__PURE__*/React.createElement(\"button\",{id:\"add-step\",className:\"btn btn-outline-primary\",type:\"button\",onClick:this.addStepsRow},\"Add Steps\")),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"label\",null,\"Please upload a picture of your recipe if you want to update: \"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{alt:\"recipe\",className:\"Image\",src:this.state.recipe.imageUrl}),/*#__PURE__*/React.createElement(ImageUploader,{withIcon:false,withPreview:true,singleImage:true,buttonText:\"Upload a picture for your recipe\",onChange:this.onImageUpload,imgExtension:['.jpg','.png','.JPG','.PNG'],maxFileSize:5242880}))),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"Submit\",onSubmit:this.onSubmit,value:\"Update Recipe\",className:\"btn btn-primary\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",id:\"cancel-edit\",className:\"btn btn-primary\",onClick:this.onCancel},\"Cancel\")))));}}]);return EditRecipe;}(Component);export{EditRecipe as default};","map":{"version":3,"sources":["/Users/FrankChen/csc309/tp/team07/client/src/components/editRecipe/editRecipe.component.js"],"names":["React","Component","Navbar","recipe1","Multiselect","Container","Dropdown","ImageUploader","Col","getRecipe","setRecipe","UnitType","categoriesOptions","name","id","EditRecipe","props","ReturnView","e","preventDefault","history","push","state","rid","onCancel","onSubmit","onChangeRecipeName","setState","target","value","onChangeDescription","description","onChangeIngredientsName","index","ingredients","recipe","onChangeIngredientsQuan","quantity","addIngredientsRow","prevState","unit","onChangeRemoveIngredients","splice","onChangeSteps","steps","addStepsRow","onChangeRemoveSteps","onImageUpload","picture","filePath","concat","onSelect","selectedList","selectedItem","newCategories","categories","console","log","onRemove","removedItem","findIndex","element","match","params","file","creatorUsername","creatorId","app","filter","c","includes","map","ingredient","onSelectIngredientsUnit","step","imageUrl"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './editRecipe.css'\nimport Navbar from \"../Navbar/navbar.component\" \nimport recipe1 from '../../recipes/butter-chicken.jpg'\nimport {Multiselect} from 'multiselect-react-dropdown';\nimport Container from \"@material-ui/core/Container\"\nimport Dropdown from 'react-dropdown';\nimport ImageUploader from 'react-images-upload'; \nimport Col from 'react-bootstrap/Col';\n\nimport {getRecipe, setRecipe} from \"../../actions/recipe\";\n\nconst UnitType = ['(quantity)','kg', 'g','mg', 'cup(s)', 'teaspoon(s)', 'tablespoon(s)', 'mL', 'L', 'oz', 'lb(s)'];\nconst categoriesOptions =[\n    {name: \"Cake\", id: 0},\n    {name: \"Noodles\", id: 1},\n    {name: \"Pie\", id: 2},\n    {name: \"Pizza\", id: 3},\n    {name: \"Salads\", id: 4},\n    {name: \"Sandwiches\", id: 5},\n    {name: \"Seafood\", id: 6},\n    {name: \"Soup\", id: 7}\n]; \nexport default class EditRecipe extends Component {\n    constructor(props){\n        super(props);\n\n        this.props.history.push('/editrecipe/'+this.props.match.params.rid)\n        // requires server call to fetch the recipe information\n        this.state = {\n            rid: this.props.match.params.rid,\n            recipe:{\n                name: \"\",\n                description: \"\",\n                categories: [],\n                ingredients: [{name:\"\", quantity:\"\", unit: \"\"}],\n                steps:[\"\"],\n                file:{},\n                filePath: \"\",\n                creatorUsername: \"\",\n                creatorId: \"\"\n            }\n        }\n        getRecipe(this, this.props.match.params.rid)\n    }\n\n    componentDidMount() {\n        // this is where the server calls are invoked\n        // state variable is updated hereexport\n    }\n\n    ReturnView=(e)=>{\n        e.preventDefault();\n        // server calls are required to push the updated recipe to the server\n        this.props.history.push(\"/viewrecipe/\"+this.state.rid)\n    }\n\n    onCancel=(e)=>{\n        e.preventDefault();\n        this.props.history.push(\"/viewrecipe/\"+this.state.rid)\n    }\n\n    onSubmit=(e)=>{\n        e.preventDefault();\n        setRecipe(this.state.rid,this)\n    }\n\n    onChangeRecipeName = (e) =>{\n        e.preventDefault();\n        this.setState({ name: e.target.value });\n    }\n\n    onChangeDescription = (e) =>{\n        e.preventDefault();\n        this.setState({ description: e.target.value });\n    }\n\n    onChangeIngredientsName = (e,index)=>{\n        let ingredients = this.state.recipe.ingredients;\n        ingredients[index].name = e.target.value;\n        this.setState({ ingredients: ingredients });\n    }\n\n    onChangeIngredientsQuan=(e,index)=>{\n        let ingredients = this.state.recipe.ingredients;\n        ingredients[index].quantity = e.target.value;\n        this.setState({ ingredients: ingredients });\n    }\n\n    addIngredientsRow=()=>{\n       this.setState((prevState)=>({ingredients:[...prevState.ingredients, {name: \"\", quantity:\"\", unit:\"\"}],\n        }));\n    }\n\n    onChangeRemoveIngredients=(index)=>{\n        this.state.recipe.ingredients.splice(index,1);\n        this.setState({ingredients: this.state.recipe.ingredients})\n    }\n\n    onChangeSteps=(e,index)=>{\n        let steps = this.recipe.state.steps;\n        steps[index] = e.target.value;\n        this.setState({ steps: steps });\n    }\n\n    addStepsRow=()=>{\n        this.setState((prevState)=>({steps:[...prevState.steps, \"\"],\n        }));\n    }\n\n    onChangeRemoveSteps=(index)=>{\n        this.state.recipe.steps.splice(index,1);\n        this.setState({steps: this.state.recipe.steps})\n    }\n\n    onImageUpload=(picture)=>{\n        this.setState({filePath: this.state.recipe.filePath.concat(picture)});\n    }\n\n    onSelect=(selectedList, selectedItem)=>{\n        const newCategories = this.state.recipe.categories;\n        newCategories.push(selectedItem.id);\n        this.setState({categories: newCategories})\n        console.log(this.state.recipe.categories)\n    }\n     \n    onRemove=(selectedList, removedItem)=>{\n        const index = this.state.recipe.categories.findIndex((element) => element === removedItem.id)\n        this.state.recipe.categories.splice(index,1);\n        this.setState({categories: this.state.recipe.categories})\n    }\n\n    render(){\n        const { app } = this.props;\n\n        return(\n            <div> \n            <Container maxWidth='md'>\n                <Navbar app={app}/>\n                <form onSubmit={this.ReturnView} className=\"edit-recipe\">\n                    <b>Edit Your Recipe</b>\n                    <div className=\"form-group\">\n                    <label> Recipe Name: </label>\n                        <input \n                            type = \"Name\" \n                            required \n                            className = \"form-control\" \n                            value = {this.state.recipe.name} \n                            onChange={this.onChangeRecipeName}\n                        />\n                    </div>\n                    <div className = \"Recipe-form\">\n                        <label> Recipe Description: </label>\n                        <input \n                            type = \"Description\" \n                            placeholder=\"optional\" \n                            className = \"form-control\" \n                            value = {this.state.recipe.description} \n                            onChange={this.onChangeDescription}\n                        />\n                    </div>\n                    <div className=\"Recipe-form\">\n                        <label>Cuisine Type: </label>\n                        <Multiselect\n                            placeholder = \"Select cuisine type(s)\"\n                            options={categoriesOptions} \n                            selectedValues={categoriesOptions.filter(c => this.state.recipe.categories.includes(c.id))}\n                            onSelect={this.onSelect} \n                            onRemove={this.onRemove} \n                            displayValue=\"name\" \n                        />\n                    </div>\n                    <div className = \"Ingredient-form\" >\n                        <label> Recipe Ingredients: </label>\n                        {\n                            this.state.recipe.ingredients.map((ingredient, index) => {\n                                return(\n                                    <div className=\"row\" id=\"Ingredient-row\" key={index}>\n                                        <Col className=\"col\" xs={5}>\n                                            <input \n                                                type = \"ingredients\" \n                                                required \n                                                placeholder=\"name\"\n                                                className = \"form-control\"\n                                                value = {ingredient.name} \n                                                onChange={(e)=>this.onChangeIngredientsName(e,index)}\n                                            />\n                                        </Col>\n                                        <Col className=\"col\" xs={2}>\n                                            <input \n                                                type = \"Ingredients\" \n                                                required \n                                                placeholder=\"quantity\"\n                                                className = \"form-control\" \n                                                value = {ingredient.quantity} \n                                                onChange={(e)=>this.onChangeIngredientsQuan(e,index)}\n                                            />\n                                        </Col>\n                                        <Col className=\"col\" xs={3}>\n                                            <select class=\"form-control\" value = {ingredient.unit} name=\"units\" id=\"units\" onChange={(e)=>this.onSelectIngredientsUnit(e,index)}>\n                                                <option value={UnitType[0]}>{UnitType[0]}</option>\n                                                <option value={UnitType[1]}>{UnitType[1]}</option>\n                                                <option value={UnitType[2]}>{UnitType[2]}</option>\n                                                <option value={UnitType[3]}>{UnitType[3]}</option>\n                                                <option value={UnitType[4]}>{UnitType[4]}</option>\n                                                <option value={UnitType[5]}>{UnitType[5]}</option>\n                                                <option value={UnitType[6]}>{UnitType[6]}</option>\n                                                <option value={UnitType[7]}>{UnitType[7]}</option>\n                                                <option value={UnitType[8]}>{UnitType[8]}</option>\n                                                <option value={UnitType[9]}>{UnitType[9]}</option>\n                                                <option value={UnitType[10]}>{UnitType[10]}</option>\n                                                <option value={UnitType[11]}>{UnitType[11]}</option>\n                                            </select>           \n                                        </Col>\n                                        <Col className =\"col\" xs={1}>\n                                            <button \n                                                type=\"button\"\n                                                id=\"remove-ingredient\"\n                                                className = \"btn btn-outline-primary\" \n                                                onClick={(e)=>this.onChangeRemoveIngredients(index)}>Remove</button>\n                                        </Col>\n                                    </div>\n                                )})\n                        } \n                    </div>\n                    <div className=\"AddIngredient-btn\">\n                        <button id=\"add-ingredient\" className = \"btn btn-outline-primary\" type = \"button\" onClick={this.addIngredientsRow} >\n                            Add Ingredients\n                        </button>\n                    </div>\n                    <div className = \"Step-form\">\n                        <label> Recipe Steps: </label>\n                        {\n                            this.state.recipe.steps.map((step, index) => {\n                                return(\n                                    <div className=\"row\" key={index}>\n                                        <Col className = \"col\" xs = {10}>\n                                            <textarea \n                                                type = \"Steps\" \n                                                required \n                                                className = \"form-control\" \n                                                value = {step} \n                                                onChange={(e)=>this.onChangeSteps(e,index)}\n                                            />\n                                        </Col>\n                                        <Col className =\"col\">\n                                            <button \n                                                type=\"button\"\n                                                id=\"remove-step\"\n                                                className = \"btn btn-outline-primary\" \n                                                onClick={(e)=>this.onChangeRemoveSteps(index)}>Remove</button>\n                                        </Col>\n                                    </div>\n                                )})\n                        }\n                    </div>\n                    <div className=\"AddSteps-btn\">\n                        <button id = \"add-step\" className = \"btn btn-outline-primary\" type = \"button\" onClick={this.addStepsRow} >\n                            Add Steps\n                        </button> \n                    </div>\n                    <div className = \"Recipe-form\">\n                        <label>Please upload a picture of your recipe if you want to update: </label>\n                        <div>\n                            <img alt=\"recipe\" className=\"Image\" src={this.state.recipe.imageUrl} /> \n                            <ImageUploader\n                                withIcon = {false}\n                                withPreview = {true}\n                                singleImage = {true}\n                                buttonText = 'Upload a picture for your recipe'\n                                onChange={this.onImageUpload}\n                                imgExtension={['.jpg', '.png', '.JPG', '.PNG']}\n                                maxFileSize={5242880}\n                            />\n                        </div>\n                    </div>\n                    <div className = \"Recipe-form\">\n                        <input \n                            type = \"Submit\" \n                            onSubmit = {this.onSubmit}\n                            value = \"Update Recipe\" \n                            className = \"btn btn-primary\"\n                        />\n                        <button \n                            type=\"button\"\n                            id=\"cancel-edit\"\n                            className = \"btn btn-primary\" \n                            onClick={this.onCancel}>Cancel</button>\n                    </div>\n                </form>\n            </Container>\n            </div>  \n        )\n    }\n} "]},"metadata":{},"sourceType":"module"}