{"ast":null,"code":"import _classCallCheck from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Navbar from\"../Navbar/navbar.component\";import{Link}from\"react-router-dom\";import{Container}from\"@material-ui/core\";import Ingredients from\"./ingredients.component\";import Steps from\"./steps.component\";import{getRecipe,deleteRecipe,setRecipe,getTop2Recipes,DeleteFromRecipeList,addToRecipeList}from\"../../actions/recipe\";import{uid}from\"react-uid\";import Card from'@material-ui/core/Card';import CardActions from'@material-ui/core/CardActions';import CardActionArea from'@material-ui/core/CardActionArea';import CardContent from'@material-ui/core/CardContent';import CardMedia from'@material-ui/core/CardMedia';import Typography from'@material-ui/core/Typography';import Favorite from'@material-ui/icons/Favorite';import FavoriteBorder from'@material-ui/icons/FavoriteBorder';import BookmarkIcon from'@material-ui/icons/Bookmark';import BookmarkBorderIcon from'@material-ui/icons/BookmarkBorder';import{yellow}from'@material-ui/core/colors';import Checkbox from'@material-ui/core/Checkbox';import FormControlLabel from'@material-ui/core/FormControlLabel';import{withStyles}from'@material-ui/core/styles';import swal from'sweetalert';import'./viewRecipe.css';var styles={card:{borderRadius:20},media:{width:600,height:400},likeButton:{paddingLeft:40},saveButton:{marginLeft:385}};var ViewRecipe=/*#__PURE__*/function(_Component){_inherits(ViewRecipe,_Component);var _super=_createSuper(ViewRecipe);function ViewRecipe(props){var _this;_classCallCheck(this,ViewRecipe);_this=_super.call(this,props);_this.clickStar=function(rid){if(_this.props.app.state.currentUser.collectedRecipes.includes(rid)){_this.props.app.state.currentUser.collectedRecipes=_this.props.app.state.currentUser.collectedRecipes.filter(function(recipe){return recipe!==rid;});DeleteFromRecipeList(_this.props.app.state.currentUser._id,{collectedRecipes:rid});_this.setState({collected:false});}else{_this.props.app.state.currentUser.collectedRecipes.push(rid);addToRecipeList(_this.props.app.state.currentUser._id,{collectedRecipes:rid});_this.setState({collected:true});}};_this.clickHeart=function(rid){var newRecipe=_this.state.recipe;if(_this.props.app.state.currentUser.likedRecipes.includes(rid)){_this.props.app.state.currentUser.likedRecipes=_this.props.app.state.currentUser.likedRecipes.filter(function(recipe){return recipe!==rid;});DeleteFromRecipeList(_this.props.app.state.currentUser._id,{likedRecipes:rid});newRecipe.likes--;_this.setState({likes:newRecipe});}else{_this.props.app.state.currentUser.likedRecipes.push(rid);addToRecipeList(_this.props.app.state.currentUser._id,{likedRecipes:rid});newRecipe.likes++;_this.setState({recipes:newRecipe});}setRecipe(rid,{likes:newRecipe.likes});};_this.editRecipe=function(e){e.preventDefault();_this.props.history.push(\"/editRecipe/\"+_this.state.recipe._id);};_this.deleteRecipe=function(e){e.preventDefault();swal({title:\"Are you sure?\",text:\"Once deleted, you will not be able to recover this recipe\",icon:\"warning\",buttons:[\"Cancel\",\"Delete\"]}).then(function(confirmDelete){if(confirmDelete){deleteRecipe(_this.state.recipe._id,_assertThisInitialized(_this));swal({title:\"Poof! Your recipe is gone!\",icon:\"success\"});}else{swal({title:\"Your recipe is still here!\"});}});};_this.editDeleteButtonGen=function(){if(_this.state.recipe.creatorId===_this.props.app.state.currentUser._id){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"view-recipe-form-group\"},/*#__PURE__*/React.createElement(\"form\",{float:\"left\",onSubmit:_this.editRecipe},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Edit\",className:\"btn btn-primary\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"view-recipe-form-group\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:_this.deleteRecipe},/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Delete\",className:\"btn btn-primary\"}))));}else{return null;}};_this.refresh=function(rid){getRecipe(_assertThisInitialized(_this),rid);getTop2Recipes(_assertThisInitialized(_this),rid);};_this.props.history.push('/viewrecipe/'+_this.props.match.params.rid);// requires server calls to update the information based on the recipe id\n_this.state={liked:false,collected:false,recipe:{_id:0,name:\"\",description:\"\",likes:0,categories:[],creatorUsername:\"\",creatorId:\"\",steps:[],ingredients:[{name:\"\",quantity:\"\",unit:\"\"}],filePath:\"\"},top2_recipes:[],dummy:0};getRecipe(_assertThisInitialized(_this),_this.props.match.params.rid);// no duplicate with the current rid\ngetTop2Recipes(_assertThisInitialized(_this),_this.props.match.params.rid);return _this;}_createClass(ViewRecipe,[{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,classes=_this$props.classes,app=_this$props.app;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Container,{maxWidth:\"md\"},/*#__PURE__*/React.createElement(Navbar,{app:app}),/*#__PURE__*/React.createElement(\"div\",{className:\"recipe-des\"},/*#__PURE__*/React.createElement(Card,{className:classes.card},/*#__PURE__*/React.createElement(CardMedia,{className:classes.media,component:\"img\",alt:this.state.recipe.name,image:this.state.recipe.imageUrl}),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"h4\",component:\"h4\"},this.state.recipe.name),/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"h5\",component:\"h5\"},this.state.recipe.description),/*#__PURE__*/React.createElement(Typography,{variant:\"h6\",color:\"textSecondary\",component:\"h6\"},/*#__PURE__*/React.createElement(Link,{to:\"/viewprofile/\"+this.state.recipe.creatorId},\"By: \"+this.state.recipe.creatorUsername))),/*#__PURE__*/React.createElement(CardActions,{disableSpacing:true},/*#__PURE__*/React.createElement(\"div\",{className:\"like-class\"},/*#__PURE__*/React.createElement(FormControlLabel,{className:classes.likeButton,labelPlacement:\"end\",control:/*#__PURE__*/React.createElement(Checkbox,{checked:this.props.app.state.currentUser.likedRecipes&&this.props.app.state.currentUser.likedRecipes.includes(this.state.recipe._id),disableRipple:true,onChange:function onChange(){return _this2.clickHeart(_this2.state.recipe._id);},icon:/*#__PURE__*/React.createElement(FavoriteBorder,{fontSize:\"large\"}),checkedIcon:/*#__PURE__*/React.createElement(Favorite,{fontSize:\"large\"}),name:\"liked\"}),label:this.state.recipe.likes}),/*#__PURE__*/React.createElement(FormControlLabel,{className:classes.saveButton,control:/*#__PURE__*/React.createElement(Checkbox,{checked:this.props.app.state.currentUser.collectedRecipes&&this.props.app.state.currentUser.collectedRecipes.includes(this.state.recipe._id),disableRipple:true,onChange:function onChange(){return _this2.clickStar(_this2.state.recipe._id);},icon:/*#__PURE__*/React.createElement(BookmarkBorderIcon,{fontSize:\"large\"}),checkedIcon:/*#__PURE__*/React.createElement(BookmarkIcon,{fontSize:\"large\",style:{color:yellow[600]}}),name:\"saved\"})}))))),this.state.top2_recipes&&this.state.top2_recipes.length===2&&this.state.top2_recipes[0]&&this.state.top2_recipes[1]&&/*#__PURE__*/React.createElement(\"div\",{className:\"recommendations\"},/*#__PURE__*/React.createElement(\"h4\",null,\"Recommendations\"),this.state.top2_recipes.map(function(recipe){return/*#__PURE__*/React.createElement(\"div\",{key:uid(recipe._id),className:\"view-other\"},/*#__PURE__*/React.createElement(Link,{to:\"/viewrecipe/\"+recipe._id,onClick:function onClick(){return _this2.refresh(recipe._id);}},/*#__PURE__*/React.createElement(Card,{className:classes.card},/*#__PURE__*/React.createElement(CardActionArea,null,/*#__PURE__*/React.createElement(CardMedia,{height:\"170\",component:\"img\",alt:recipe.name,image:recipe.imageUrl}),/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,variant:\"h6\",component:\"h6\"},recipe.name))))));})),/*#__PURE__*/React.createElement(\"div\",{className:\"mid-section\"},/*#__PURE__*/React.createElement(Steps,{steps:this.state.recipe.steps}),/*#__PURE__*/React.createElement(Ingredients,{ingredients:this.state.recipe.ingredients})),/*#__PURE__*/React.createElement(this.editDeleteButtonGen,null)));}}]);return ViewRecipe;}(Component);export default withStyles(styles)(ViewRecipe);","map":{"version":3,"sources":["/Users/FrankChen/csc309/tp/team07/client/src/components/viewRecipe/viewRecipe.component.js"],"names":["React","Component","Navbar","Link","Container","Ingredients","Steps","getRecipe","deleteRecipe","setRecipe","getTop2Recipes","DeleteFromRecipeList","addToRecipeList","uid","Card","CardActions","CardActionArea","CardContent","CardMedia","Typography","Favorite","FavoriteBorder","BookmarkIcon","BookmarkBorderIcon","yellow","Checkbox","FormControlLabel","withStyles","swal","styles","card","borderRadius","media","width","height","likeButton","paddingLeft","saveButton","marginLeft","ViewRecipe","props","clickStar","rid","app","state","currentUser","collectedRecipes","includes","filter","recipe","_id","setState","collected","push","clickHeart","newRecipe","likedRecipes","likes","recipes","editRecipe","e","preventDefault","history","title","text","icon","buttons","then","confirmDelete","editDeleteButtonGen","creatorId","refresh","match","params","liked","name","description","categories","creatorUsername","steps","ingredients","quantity","unit","filePath","top2_recipes","dummy","classes","imageUrl","color","length","map"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Navbar from \"../Navbar/navbar.component\";\nimport { Link } from \"react-router-dom\"\nimport {Container} from \"@material-ui/core\"\nimport Ingredients from \"./ingredients.component\"\nimport Steps from \"./steps.component\"\nimport {getRecipe, deleteRecipe, setRecipe, getTop2Recipes, DeleteFromRecipeList, addToRecipeList} from \"../../actions/recipe\"\nimport {uid} from \"react-uid\"\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\nimport Favorite from '@material-ui/icons/Favorite';\nimport FavoriteBorder from '@material-ui/icons/FavoriteBorder';\nimport BookmarkIcon from '@material-ui/icons/Bookmark';\nimport BookmarkBorderIcon from '@material-ui/icons/BookmarkBorder';\nimport { yellow } from '@material-ui/core/colors';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport { withStyles } from '@material-ui/core/styles';\nimport swal from 'sweetalert';\n\nimport './viewRecipe.css'\n\nconst styles = {\n    card:{\n        borderRadius: 20,\n    },\n    media:{\n        width: 600,\n        height: 400,\n    },\n    likeButton:{\n        paddingLeft: 40,\n    },\n    saveButton: {\n        marginLeft: 385,\n    },\n  };\n\nclass ViewRecipe extends Component {\n    constructor(props){\n        super(props);\n        this.props.history.push('/viewrecipe/'+this.props.match.params.rid);\n        // requires server calls to update the information based on the recipe id\n        this.state = {\n            liked: false,\n            collected: false,\n            recipe:{\n                _id: 0,\n                name: \"\",\n                description: \"\",\n                likes: 0,\n                categories: [],\n                creatorUsername: \"\",\n                creatorId: \"\",\n                steps: [],\n                ingredients: [{name:\"\", quantity:\"\", unit: \"\"}],\n                filePath: \"\",\n            },\n            top2_recipes:[],\n            dummy: 0,\n        }\n        getRecipe(this, this.props.match.params.rid)\n        // no duplicate with the current rid\n        getTop2Recipes(this, this.props.match.params.rid);\n    }\n\n\n    clickStar=(rid)=>{\n        if(this.props.app.state.currentUser.collectedRecipes.includes(rid)){\n            this.props.app.state.currentUser.collectedRecipes = this.props.app.state.currentUser.collectedRecipes.filter(recipe=> recipe !== rid)\n            DeleteFromRecipeList(this.props.app.state.currentUser._id, {collectedRecipes: rid})\n            this.setState({collected: false})\n        }else{\n            this.props.app.state.currentUser.collectedRecipes.push(rid)\n            addToRecipeList(this.props.app.state.currentUser._id, {collectedRecipes: rid})\n            this.setState({collected: true})\n        }\n    }\n\n    clickHeart=(rid)=>{\n        let newRecipe = this.state.recipe;\n        if(this.props.app.state.currentUser.likedRecipes.includes(rid)){\n            this.props.app.state.currentUser.likedRecipes = this.props.app.state.currentUser.likedRecipes.filter(recipe=> recipe !== rid)\n            DeleteFromRecipeList(this.props.app.state.currentUser._id, {likedRecipes: rid})\n            newRecipe.likes--;\n            this.setState({ likes: newRecipe });\n        }else{\n            this.props.app.state.currentUser.likedRecipes.push(rid)\n            addToRecipeList(this.props.app.state.currentUser._id, {likedRecipes: rid})\n            newRecipe.likes++;\n            this.setState({ recipes: newRecipe });\n        }\n        setRecipe(rid, {likes: newRecipe.likes})\n    }\n\n    editRecipe=(e)=>{\n        e.preventDefault();\n        this.props.history.push(\"/editRecipe/\" + this.state.recipe._id);\n    }\n\n    deleteRecipe=(e)=>{\n        e.preventDefault();\n        swal({title: \"Are you sure?\", text:\"Once deleted, you will not be able to recover this recipe\", icon:\"warning\",buttons: [\"Cancel\", \"Delete\"]})\n        .then((confirmDelete)=>{\n            if(confirmDelete){\n                deleteRecipe(this.state.recipe._id, this)\n                swal({title:\"Poof! Your recipe is gone!\", icon:\"success\"})\n            }else{\n                swal({title:\"Your recipe is still here!\"})\n            }\n        })\n    }\n\n    editDeleteButtonGen=()=>{\n        if(this.state.recipe.creatorId === this.props.app.state.currentUser._id){\n            return (\n            <div>\n            <div className=\"view-recipe-form-group\">\n                <form float=\"left\" onSubmit={this.editRecipe}><input type=\"submit\" value=\"Edit\" className=\"btn btn-primary\"/></form>\n            </div>\n            <div className=\"view-recipe-form-group\">\n                <form onSubmit={this.deleteRecipe}><input type=\"submit\" value=\"Delete\" className=\"btn btn-primary\"/></form>\n            </div>\n            </div>);\n        } else {\n            return null;\n        }\n\n    }\n    \n    refresh=(rid)=>{\n        getRecipe(this, rid)\n        getTop2Recipes(this, rid);\n    }\n\n    recommendationGen\n\n    render(){\n        const {classes, app} = this.props;\n        return(\n            <div>\n            <Container maxWidth='md'>\n                <Navbar app={app}/>\n                <div className=\"recipe-des\">\n                    <Card className={classes.card}>\n                        <CardMedia\n                            className={classes.media}\n                            component=\"img\"\n                            alt={this.state.recipe.name}\n                            image={this.state.recipe.imageUrl}\n                        />\n                        <CardContent>\n                        <Typography gutterBottom variant=\"h4\" component=\"h4\">\n                            {this.state.recipe.name}\n                        </Typography>\n                        <Typography gutterBottom variant=\"h5\" component=\"h5\">\n                            {this.state.recipe.description}\n                        </Typography>\n                        <Typography variant=\"h6\" color=\"textSecondary\" component=\"h6\">\n                            <Link to={\"/viewprofile/\"+ this.state.recipe.creatorId}>{\"By: \"+this.state.recipe.creatorUsername}</Link>\n                        </Typography>\n                        </CardContent>\n                        <CardActions disableSpacing>\n                            <div className=\"like-class\">\n                                <FormControlLabel\n                                className={classes.likeButton}\n                                labelPlacement=\"end\"\n                                control={<Checkbox checked={this.props.app.state.currentUser.likedRecipes && this.props.app.state.currentUser.likedRecipes.includes(this.state.recipe._id)} disableRipple={true} onChange={()=>this.clickHeart(this.state.recipe._id)} icon={<FavoriteBorder fontSize=\"large\"/>} checkedIcon={<Favorite fontSize=\"large\"/>} name=\"liked\" />} \n                                label={this.state.recipe.likes}\n                                />\n                                <FormControlLabel\n                                className={classes.saveButton}\n                                control={<Checkbox checked={this.props.app.state.currentUser.collectedRecipes && this.props.app.state.currentUser.collectedRecipes.includes(this.state.recipe._id)} disableRipple={true} onChange={()=>this.clickStar(this.state.recipe._id)} icon={<BookmarkBorderIcon fontSize=\"large\"/>} checkedIcon={<BookmarkIcon fontSize=\"large\" style={{color: yellow[600] }}/>} name=\"saved\" />} \n                                /> \n                            </div>\n                        </CardActions>\n                    </Card>\n                </div>\n                \n                {this.state.top2_recipes && this.state.top2_recipes.length === 2 && this.state.top2_recipes[0] && this.state.top2_recipes[1] &&\n                <div className=\"recommendations\">\n                    <h4>Recommendations</h4>\n                {this.state.top2_recipes.map((recipe)=>(\n                    <div key={uid(recipe._id)} className=\"view-other\">\n                        <Link to={\"/viewrecipe/\" + recipe._id} onClick={()=>this.refresh(recipe._id)}>\n                        <Card className={classes.card}>\n                            <CardActionArea>\n                                <CardMedia\n                                    height=\"170\"\n                                    component=\"img\"\n                                    alt={recipe.name}\n                                    image={recipe.imageUrl}\n                                />\n                                <CardContent>\n                                <Typography gutterBottom variant=\"h6\" component=\"h6\">\n                                    {recipe.name}\n                                </Typography>\n                                </CardContent>\n                            </CardActionArea>\n                        </Card>\n                        </Link>\n                    </div>\n                    ))}\n                </div>}\n                \n                <div className=\"mid-section\">\n                    <Steps\n                        steps={this.state.recipe.steps}\n                    />\n\n                    <Ingredients\n                        ingredients={this.state.recipe.ingredients}\n                    />\n                </div>\n\n                <this.editDeleteButtonGen/>\n            </Container> \n            </div> \n        )\n    }\n} \n\nexport default withStyles(styles)(ViewRecipe);"]},"metadata":{},"sourceType":"module"}