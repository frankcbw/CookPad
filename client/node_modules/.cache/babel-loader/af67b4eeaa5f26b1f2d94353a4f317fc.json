{"ast":null,"code":"import _regeneratorRuntime from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{getAllRecipes,setRecipe,DeleteFromRecipeList,addToRecipeList}from'../../actions/recipe';import{Container}from'@material-ui/core';// import css\nimport'./homePage.css';import\"bootstrap/dist/css/bootstrap.min.css\";// import components\nimport RecipeSlideShow from'./slideshow/recipeSlideShow.component';import HomePageLeftPanel from'./leftpanel/homePageLeftPanel.component';import Navbar from'../Navbar/navbar.component';import HomePageRightPanel from'./rightpanel/homePageRightPanel.component';import RecipeList from'../recipelist/recipelist.component';import TopRecipes from\"./toprecipes/topRecipes.component\";// static images\nimport cakeIcon from'./images/cake.png';import pieIcon from'./images/pie.png';import pizzaIcon from'./images/pizza.png';import saladIcon from'./images/salad.png';import sandwichIcon from'./images/sandwich.png';import seafoodIcon from'./images/seafood.png';import soupIcon from'./images/soup.png';import noodlesIcon from'./images/noodles.png';var HomePage=/*#__PURE__*/function(_Component){_inherits(HomePage,_Component);var _super=_createSuper(HomePage);function HomePage(props){var _this;_classCallCheck(this,HomePage);_this=_super.call(this,props);_this.incrSlide=function(){if(_this.state.slide_idx<_this.state.num_slides-1){_this.setState({slide_idx:_this.state.slide_idx+1});}else{_this.setState({slide_idx:0});}var dots=document.getElementsByClassName(\"dot\");for(var i=0;i<dots.length;i++){dots[i].className=dots[i].className.replace(\" active\",\"\");}dots[_this.state.slide_idx].className+=\" active\";};_this.decrSlide=function(){if(_this.state.slide_idx>0){_this.setState({slide_idx:_this.state.slide_idx-1});}else{_this.setState({slide_idx:_this.state.num_slides-1});}var dots=document.getElementsByClassName(\"dot\");for(var i=0;i<dots.length;i++){dots[i].className=dots[i].className.replace(\" active\",\"\");}dots[_this.state.slide_idx].className+=\" active\";};_this.autoShowSlides=function(){if(_this.state.recipes&&_this.state.recipes.length>=3){_this.incrSlide();var dots=document.getElementsByClassName(\"dot\");for(var i=0;i<dots.length;i++){dots[i].className=dots[i].className.replace(\" active\",\"\");}dots[_this.state.slide_idx].className+=\" active\";}};_this.clickRecipe=function(rid){_this.props.history.push(\"/viewrecipe/\"+rid);};_this.clickStar=function(rid){if(_this.props.app.state.currentUser.collectedRecipes.includes(rid)){_this.props.app.state.currentUser.collectedRecipes=_this.props.app.state.currentUser.collectedRecipes.filter(function(recipe){return recipe!==rid;});DeleteFromRecipeList(_this.props.app.state.currentUser._id,{collectedRecipes:rid});}else{_this.props.app.state.currentUser.collectedRecipes.push(rid);addToRecipeList(_this.props.app.state.currentUser._id,{collectedRecipes:rid});}_this.setState({num_slides:3});};_this.clickHeart=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(rid){var newLikes,new_recipes,new_displayed_recipes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newLikes=0;new_recipes=[];new_displayed_recipes=[];if(!_this.props.app.state.currentUser.likedRecipes.includes(rid)){_context.next=13;break;}_this.props.app.state.currentUser.likedRecipes=_this.props.app.state.currentUser.likedRecipes.filter(function(recipe){return recipe!==rid;});_context.next=7;return DeleteFromRecipeList(_this.props.app.state.currentUser._id,{likedRecipes:rid});case 7:_this.state.recipes.forEach(function(recipe){var new_recipe=Object.create(recipe);console.log(new_recipe);if(recipe._id===rid){new_recipe.likes--;newLikes=new_recipe.likes;}new_recipes.push(new_recipe);});_this.setState({recipes:new_recipes});_this.state.displayed_recipes.forEach(function(recipe){var new_recipe=Object.create(recipe);if(new_recipe._id===rid){new_recipe.likes--;}new_displayed_recipes.push(new_recipe);});_this.setState({displayed_recipes:new_displayed_recipes});_context.next=20;break;case 13:_this.props.app.state.currentUser.likedRecipes.push(rid);_context.next=16;return addToRecipeList(_this.props.app.state.currentUser._id,{likedRecipes:rid});case 16:_this.state.recipes.forEach(function(recipe){var new_recipe=Object.create(recipe);if(recipe._id===rid){new_recipe.likes++;newLikes=new_recipe.likes;}new_recipes.push(new_recipe);});_this.setState({recipes:new_recipes});_this.state.displayed_recipes.forEach(function(recipe){var new_recipe=Object.create(recipe);if(new_recipe._id===rid){new_recipe.likes++;}new_displayed_recipes.push(new_recipe);});_this.setState({displayed_recipes:new_displayed_recipes});case 20:// server call to update recipe\nsetRecipe(rid,{likes:newLikes});case 21:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.clickCategory=function(event){var new_categories=_this.state.categories;new_categories[event.target.name].checked=!_this.state.categories[event.target.name].checked;_this.setState({categories:new_categories});var categories_ondisplay=[];for(var i=0;i<_this.state.categories.length;i++){if(_this.state.categories[i].checked)categories_ondisplay.push(i);}// show and hide receipes\nvar new_recipes=[];for(var _i=0;_i<_this.state.recipes.length;_i++){for(var j=0;j<_this.state.recipes[_i].categories.length;j++){if(categories_ondisplay.includes(_this.state.recipes[_i].categories[j])){new_recipes.push(_this.state.recipes[_i]);break;}}}_this.setState({displayed_recipes:new_recipes});};_this.clickAll=function(e){_this.setState({all_checked:!_this.state.all_checked});var all_checked=!_this.state.all_checked;var new_categories=_this.state.categories;new_categories.forEach(function(category){category.checked=all_checked;});_this.setState({categories:new_categories});if(all_checked){_this.setState({displayed_recipes:_this.state.recipes});}else{_this.setState({displayed_recipes:[]});}};_this.slideshowGenerator=function(){if(_this.state.top3_recipe&&_this.state.top3_recipe.length){return/*#__PURE__*/React.createElement(RecipeSlideShow,{imgsrc:_this.state.recipes[_this.state.top3_recipe[_this.state.slide_idx]].imageUrl,imgalt:_this.state.recipes[_this.state.top3_recipe[_this.state.slide_idx]].name,imgtext:_this.state.recipes[_this.state.top3_recipe[_this.state.slide_idx]].name,decrSlide:_this.decrSlide,incrSlide:_this.incrSlide});}else{return null;}};_this.props.history.push(\"/homepage\");_this.state={slide_idx:0,num_slides:3,// this is the index into the recipes array\ntop3_recipe:[],categories:[{id:0,src:cakeIcon,text:'Cake',checked:true},{id:1,src:noodlesIcon,text:'Noodles',checked:true},{id:2,src:pieIcon,text:'Pie',checked:true},{id:3,src:pizzaIcon,text:'Pizza',checked:true},{id:4,src:saladIcon,text:'Salads',checked:true},{id:5,src:sandwichIcon,text:'Sandwiches',checked:true},{id:6,src:seafoodIcon,text:'Seafood',checked:true},{id:7,src:soupIcon,text:'Soup',checked:true}],all_checked:true,recipes:[],displayed_recipes:[]};getAllRecipes(_assertThisInitialized(_this));return _this;}_createClass(HomePage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.interval=setInterval(function(){_this2.autoShowSlides();},3000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearInterval(this.interval);}},{key:\"render\",value:function render(){var app=this.props.app;return/*#__PURE__*/React.createElement(\"div\",{id:\"body\"},/*#__PURE__*/React.createElement(Container,{maxWidth:\"md\"},/*#__PURE__*/React.createElement(Navbar,{app:app}),/*#__PURE__*/React.createElement(HomePageLeftPanel,{categories:this.state.categories,clickCategory:this.clickCategory,all_checked:this.state.all_checked,clickAll:this.clickAll}),/*#__PURE__*/React.createElement(\"div\",{id:\"middle-panel\"},this.state.recipes&&this.state.recipes.length>=3&&/*#__PURE__*/React.createElement(this.slideshowGenerator,null),/*#__PURE__*/React.createElement(\"div\",{id:\"recipe-list\"},/*#__PURE__*/React.createElement(RecipeList,{recipes:this.state.displayed_recipes,clickRecipe:this.clickRecipe,clickHeart:this.clickHeart,clickStar:this.clickStar,app:app}))),/*#__PURE__*/React.createElement(\"div\",{id:\"right-panel\"},this.state.recipes&&this.state.recipes.length>=3&&/*#__PURE__*/React.createElement(HomePageRightPanel,{top3_recipe:this.state.top3_recipe,recipes:this.state.recipes,app:app,clickHeart:this.clickHeart}),this.state.recipes&&this.state.recipes.length>=3&&/*#__PURE__*/React.createElement(TopRecipes,{top3_recipe:this.state.top3_recipe,recipes:this.state.recipes,app:app}))));}}]);return HomePage;}(Component);export{HomePage as default};","map":{"version":3,"sources":["/Users/FrankChen/csc309/tp/team07/client/src/components/homePage/homePage.component.js"],"names":["React","Component","getAllRecipes","setRecipe","DeleteFromRecipeList","addToRecipeList","Container","RecipeSlideShow","HomePageLeftPanel","Navbar","HomePageRightPanel","RecipeList","TopRecipes","cakeIcon","pieIcon","pizzaIcon","saladIcon","sandwichIcon","seafoodIcon","soupIcon","noodlesIcon","HomePage","props","incrSlide","state","slide_idx","num_slides","setState","dots","document","getElementsByClassName","i","length","className","replace","decrSlide","autoShowSlides","recipes","clickRecipe","rid","history","push","clickStar","app","currentUser","collectedRecipes","includes","filter","recipe","_id","clickHeart","newLikes","new_recipes","new_displayed_recipes","likedRecipes","forEach","new_recipe","Object","create","console","log","likes","displayed_recipes","clickCategory","event","new_categories","categories","target","name","checked","categories_ondisplay","j","clickAll","e","all_checked","category","slideshowGenerator","top3_recipe","imageUrl","id","src","text","interval","setInterval","clearInterval"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {getAllRecipes, setRecipe, DeleteFromRecipeList, addToRecipeList} from '../../actions/recipe';\nimport {Container} from '@material-ui/core';\n\n// import css\nimport './homePage.css'\nimport \"bootstrap/dist/css/bootstrap.min.css\"\n\n// import components\nimport RecipeSlideShow from './slideshow/recipeSlideShow.component'\nimport HomePageLeftPanel from './leftpanel/homePageLeftPanel.component'\nimport Navbar from '../Navbar/navbar.component'\nimport HomePageRightPanel from './rightpanel/homePageRightPanel.component'\nimport RecipeList from '../recipelist/recipelist.component'\nimport TopRecipes from \"./toprecipes/topRecipes.component\"\n\n// static images\nimport cakeIcon from './images/cake.png'\nimport pieIcon from './images/pie.png'\nimport pizzaIcon from './images/pizza.png'\nimport saladIcon from './images/salad.png'\nimport sandwichIcon from './images/sandwich.png'\nimport seafoodIcon from './images/seafood.png'\nimport soupIcon from './images/soup.png'\nimport noodlesIcon from './images/noodles.png'\n\nexport default class HomePage extends Component {\n    constructor(props){\n        super(props);\n        this.props.history.push(\"/homepage\");\n        this.state = {\n            slide_idx: 0,\n            num_slides: 3,\n            // this is the index into the recipes array\n            top3_recipe: [],\n            categories: [\n                {id:0, src:cakeIcon, text:'Cake', checked:true},\n                {id:1, src:noodlesIcon, text:'Noodles', checked:true},\n                {id:2, src:pieIcon, text:'Pie', checked:true},\n                {id:3, src:pizzaIcon, text: 'Pizza', checked:true},\n                {id:4, src:saladIcon, text: 'Salads', checked:true},\n                {id:5, src:sandwichIcon, text:'Sandwiches', checked:true},\n                {id:6, src:seafoodIcon, text: 'Seafood', checked:true},\n                {id:7, src:soupIcon, text:'Soup', checked:true}\n            ],\n            all_checked: true,\n            recipes: [],\n            displayed_recipes: []\n        }\n        getAllRecipes(this);\n    }\n\n    componentDidMount() {\n        this.interval = setInterval(() => {\n            this.autoShowSlides();\n        }, 3000)   \n    }\n\n    componentWillUnmount() {\n        clearInterval(this.interval);\n    }\n\n    incrSlide = () => {\n        if(this.state.slide_idx < this.state.num_slides-1){\n            this.setState({ slide_idx: this.state.slide_idx+1 });\n        } else {\n            this.setState({ slide_idx: 0 });\n        }\n        const dots = document.getElementsByClassName(\"dot\");\n        for (let i = 0; i < dots.length; i++) {\n            dots[i].className = dots[i].className.replace(\" active\", \"\");\n        }\n        dots[this.state.slide_idx].className += \" active\";\n    }\n\n    decrSlide = () => {\n        if(this.state.slide_idx > 0){\n            this.setState({ slide_idx: this.state.slide_idx-1 });\n        } else {\n            this.setState({ slide_idx: this.state.num_slides-1 });\n        }\n        const dots = document.getElementsByClassName(\"dot\");\n        for (let i = 0; i < dots.length; i++) {\n            dots[i].className = dots[i].className.replace(\" active\", \"\");\n        }\n        dots[this.state.slide_idx].className += \" active\";\n    }\n\n    autoShowSlides = () => {\n        if(this.state.recipes && this.state.recipes.length >=3){\n            this.incrSlide();\n            const dots = document.getElementsByClassName(\"dot\");\n            for (let i = 0; i < dots.length; i++) {\n                dots[i].className = dots[i].className.replace(\" active\", \"\");\n            }\n            dots[this.state.slide_idx].className += \" active\";\n        }\n    }\n\n    clickRecipe=(rid)=>{\n        this.props.history.push(\"/viewrecipe/\"+ rid);\n    }\n\n    clickStar=(rid)=>{\n        if(this.props.app.state.currentUser.collectedRecipes.includes(rid)){\n            this.props.app.state.currentUser.collectedRecipes = this.props.app.state.currentUser.collectedRecipes.filter(recipe=> recipe !== rid)\n            DeleteFromRecipeList(this.props.app.state.currentUser._id, {collectedRecipes: rid})\n        }else{\n            this.props.app.state.currentUser.collectedRecipes.push(rid)\n            addToRecipeList(this.props.app.state.currentUser._id, {collectedRecipes: rid})\n        }\n\n        this.setState({num_slides: 3})\n    }\n\n    clickHeart=async(rid)=>{\n        let newLikes = 0;\n        const new_recipes = [];\n        const new_displayed_recipes = [];\n        if(this.props.app.state.currentUser.likedRecipes.includes(rid)){\n            this.props.app.state.currentUser.likedRecipes = this.props.app.state.currentUser.likedRecipes.filter(recipe=> recipe !== rid)\n            await DeleteFromRecipeList(this.props.app.state.currentUser._id, {likedRecipes: rid})\n            this.state.recipes.forEach((recipe)=>{\n                const new_recipe = Object.create(recipe)\n                console.log(new_recipe)\n                if(recipe._id === rid){\n                    new_recipe.likes--;\n                    newLikes = new_recipe.likes;\n                }\n                new_recipes.push(new_recipe)\n            })\n            this.setState({ recipes: new_recipes });\n\n            this.state.displayed_recipes.forEach((recipe)=>{\n            const new_recipe = Object.create(recipe)\n            if(new_recipe._id === rid){\n                new_recipe.likes--;\n            }\n            new_displayed_recipes.push(new_recipe)\n            })\n            this.setState({ displayed_recipes: new_displayed_recipes });\n        }else{\n            this.props.app.state.currentUser.likedRecipes.push(rid)\n            await addToRecipeList(this.props.app.state.currentUser._id, {likedRecipes: rid})\n            this.state.recipes.forEach((recipe)=>{\n                const new_recipe = Object.create(recipe)\n                if(recipe._id === rid){\n                    new_recipe.likes++;\n                    newLikes = new_recipe.likes;\n                }\n                new_recipes.push(new_recipe)\n            })\n            this.setState({ recipes: new_recipes });\n\n            this.state.displayed_recipes.forEach((recipe)=>{\n                const new_recipe = Object.create(recipe)\n                if(new_recipe._id === rid){\n                    new_recipe.likes++;\n                }\n                new_displayed_recipes.push(new_recipe)\n            })\n            this.setState({ displayed_recipes: new_displayed_recipes });\n        }\n\n        // server call to update recipe\n        setRecipe(rid, {likes: newLikes})\n    }\n\n    clickCategory = (event) =>{\n        const new_categories = this.state.categories;\n        new_categories[event.target.name].checked = !this.state.categories[event.target.name].checked;\n        this.setState({ categories: new_categories});\n\n        const categories_ondisplay = []\n        for(let i = 0; i < this.state.categories.length; i++){\n            if(this.state.categories[i].checked)\n            categories_ondisplay.push(i)\n        }\n\n        // show and hide receipes\n        const new_recipes = []\n        for(let i = 0; i < this.state.recipes.length; i++){\n            for(let j = 0; j < this.state.recipes[i].categories.length; j++){\n                if(categories_ondisplay.includes(this.state.recipes[i].categories[j])){ \n                    new_recipes.push(this.state.recipes[i]);\n                    break;\n                }\n            }\n        }\n        this.setState({ displayed_recipes: new_recipes });\n    }\n\n    clickAll = (e) => {\n        this.setState({ all_checked: !this.state.all_checked})\n        let all_checked = !this.state.all_checked;\n        let new_categories = this.state.categories\n        new_categories.forEach((category)=>{category.checked = all_checked})\n        this.setState({ categories: new_categories});\n        if(all_checked){\n            this.setState({ displayed_recipes: this.state.recipes});\n        }else{\n            this.setState({ displayed_recipes: []});\n        }\n    }\n\n    slideshowGenerator=()=>{\n        if(this.state.top3_recipe && this.state.top3_recipe.length){\n            return <RecipeSlideShow \n            imgsrc={this.state.recipes[this.state.top3_recipe[this.state.slide_idx]].imageUrl}\n            imgalt={this.state.recipes[this.state.top3_recipe[this.state.slide_idx]].name}\n            imgtext={this.state.recipes[this.state.top3_recipe[this.state.slide_idx]].name}\n            decrSlide={this.decrSlide}\n            incrSlide={this.incrSlide}\n        />\n        }else{\n            return null;\n        }\n        \n    }\n\n    render(){\n        const { app } = this.props;\n        return(\n            <div id=\"body\"> \n                <Container maxWidth='md'>\n                    <Navbar app={app}/>\n                    <HomePageLeftPanel\n                        categories={this.state.categories}\n                        clickCategory={this.clickCategory}\n                        all_checked={this.state.all_checked}\n                        clickAll={this.clickAll}\n                    />                    \n\n                    <div id=\"middle-panel\">\n                        {this.state.recipes && this.state.recipes.length >= 3 && <this.slideshowGenerator/>}\n                        <div id=\"recipe-list\">\n                            <RecipeList \n                            recipes={this.state.displayed_recipes}\n                            clickRecipe={this.clickRecipe}\n                            clickHeart={this.clickHeart}\n                            clickStar={this.clickStar}\n                            app={app}\n                            />\n                        </div>\n                    </div>\n\n                    <div id=\"right-panel\">\n                        {this.state.recipes && this.state.recipes.length >= 3 &&\n                        <HomePageRightPanel \n                        top3_recipe={this.state.top3_recipe} \n                        recipes={this.state.recipes}\n                        app={app}\n                        clickHeart={this.clickHeart}\n                        />}\n                        \n                        {this.state.recipes && this.state.recipes.length >= 3 &&\n                        <TopRecipes\n                        top3_recipe={this.state.top3_recipe}\n                        recipes={this.state.recipes}\n                        app={app}\n                        />}\n                    </div>\n                </Container> \n            </div>\n        )\n    }\n} "]},"metadata":{},"sourceType":"module"}