{"ast":null,"code":"import _toConsumableArray from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./editRecipe.css';import Navbar from\"../Navbar/navbar.component\";import recipe1 from'../../recipes/butter-chicken.jpg';import{Multiselect}from'multiselect-react-dropdown';import Container from\"@material-ui/core/Container\";import Dropdown from'react-dropdown';import ImageUploader from'react-images-upload';import Col from'react-bootstrap/Col';import{getRecipe,setRecipe}from\"../../actions/recipe\";var UnitType=['(quantity)','kg','g','mg','cup(s)','teaspoon(s)','tablespoon(s)','mL','L','oz','lb(s)'];var categoriesOptions=[{name:\"Cake\",id:0},{name:\"Noodles\",id:1},{name:\"Pie\",id:2},{name:\"Pizza\",id:3},{name:\"Salads\",id:4},{name:\"Sandwiches\",id:5},{name:\"Seafood\",id:6},{name:\"Soup\",id:7}];var EditRecipe=/*#__PURE__*/function(_Component){_inherits(EditRecipe,_Component);var _super=_createSuper(EditRecipe);function EditRecipe(props){var _this;_classCallCheck(this,EditRecipe);_this=_super.call(this,props);_this.assignSelectedCategories=function(){for(var i=0;i<_this.state.recipe.categories.length;i++){_this.state.selectedCategories.push(categoriesOptions[_this.state.recipe.categories[i]]);console.log(_this.state.selectedCategories);}};_this.ReturnView=function(e){e.preventDefault();// server calls are required to push the updated recipe to the server\n_this.props.history.push(\"/viewrecipe/\"+_this.state.rid);};_this.onCancel=function(e){e.preventDefault();_this.props.history.push(\"/viewrecipe/\"+_this.state.rid);};_this.onSubmit=function(e){e.preventDefault();setRecipe(_this.state.rid,_assertThisInitialized(_this));};_this.onChangeRecipeName=function(e){e.preventDefault();_this.setState({name:e.target.value});};_this.onChangeDescription=function(e){e.preventDefault();_this.setState({description:e.target.value});};_this.onChangeIngredientsName=function(e,index){var ingredients=_this.state.recipe.ingredients;ingredients[index].name=e.target.value;_this.setState({ingredients:ingredients});};_this.onChangeIngredientsQuan=function(e,index){var ingredients=_this.state.recipe.ingredients;ingredients[index].quantity=e.target.value;_this.setState({ingredients:ingredients});};_this.addIngredientsRow=function(){_this.setState(function(prevState){return{ingredients:[].concat(_toConsumableArray(prevState.ingredients),[{name:\"\",quantity:\"\",unit:\"\"}])};});};_this.onChangeRemoveIngredients=function(index){_this.state.recipe.ingredients.splice(index,1);_this.setState({ingredients:_this.state.recipe.ingredients});};_this.onChangeSteps=function(e,index){var steps=_this.recipe.state.steps;steps[index]=e.target.value;_this.setState({steps:steps});};_this.addStepsRow=function(){_this.setState(function(prevState){return{steps:[].concat(_toConsumableArray(prevState.steps),[\"\"])};});};_this.onChangeRemoveSteps=function(index){_this.state.recipe.steps.splice(index,1);_this.setState({steps:_this.state.recipe.steps});};_this.onImageUpload=function(picture){_this.setState({filePath:_this.state.recipe.filePath.concat(picture)});};_this.onSelect=function(selectedList,selectedItem){var newCategories=_this.state.recipe.categories;newCategories.push(selectedItem.id);_this.setState({categories:newCategories});console.log(_this.state.recipe.categories);};_this.onRemove=function(selectedList,removedItem){var index=_this.state.recipe.categories.findIndex(function(element){return element===removedItem.id;});_this.state.recipe.categories.splice(index,1);_this.setState({categories:_this.state.recipe.categories});};_this.props.history.push('/editrecipe/'+_this.props.match.params.rid);// requires server call to fetch the recipe information\n_this.state={rid:_this.props.match.params.rid,recipe:{name:\"\",description:\"\",categories:[],ingredients:[{name:\"\",quantity:\"\",unit:\"\"}],steps:[\"\"],file:{},filePath:\"\",creatorUsername:\"\",creatorId:\"\"},selectedCategories:[]};getRecipe(_assertThisInitialized(_this),_this.props.match.params.rid);return _this;}_createClass(EditRecipe,[{key:\"componentDidMount\",value:function componentDidMount(){// this is where the server calls are invoked\n// state variable is updated hereexport\n}},{key:\"render\",value:function render(){var _this2=this;var app=this.props.app;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Container,{maxWidth:\"md\"},/*#__PURE__*/React.createElement(Navbar,{app:app}),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.ReturnView,className:\"edit-recipe\"},/*#__PURE__*/React.createElement(\"b\",null,\"Edit Your Recipe\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Name: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"Name\",required:true,className:\"form-control\",value:this.state.recipe.name,onChange:this.onChangeRecipeName})),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Description: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"Description\",placeholder:\"optional\",className:\"form-control\",value:this.state.recipe.description,onChange:this.onChangeDescription})),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"label\",null,\"Cuisine Type: \"),/*#__PURE__*/React.createElement(Multiselect,{placeholder:\"Select cuisine type(s)\",options:categoriesOptions,selectedValues:this.state.selectedCategories,onSelect:this.onSelect,onRemove:this.onRemove,displayValue:\"name\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"Ingredient-form\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Ingredients: \"),this.state.recipe.ingredients.map(function(ingredient,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",id:\"Ingredient-row\",key:index},/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:5},/*#__PURE__*/React.createElement(\"input\",{type:\"ingredients\",required:true,placeholder:\"name\",className:\"form-control\",value:ingredient.name,onChange:function onChange(e){return _this2.onChangeIngredientsName(e,index);}})),/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:2},/*#__PURE__*/React.createElement(\"input\",{type:\"Ingredients\",required:true,placeholder:\"quantity\",className:\"form-control\",value:ingredient.quantity,onChange:function onChange(e){return _this2.onChangeIngredientsQuan(e,index);}})),/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:3},/*#__PURE__*/React.createElement(Dropdown,{className:\"UnitSelector\",options:UnitType,onChange:_this2._onSelect,value:ingredient.unit})),/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:1},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",id:\"remove-ingredient\",className:\"btn btn-outline-primary\",onClick:function onClick(e){return _this2.onChangeRemoveIngredients(index);}},\"Remove\")));})),/*#__PURE__*/React.createElement(\"div\",{className:\"AddIngredient-btn\"},/*#__PURE__*/React.createElement(\"button\",{id:\"add-ingredient\",className:\"btn btn-outline-primary\",type:\"button\",onClick:this.addIngredientsRow},\"Add Ingredients\")),/*#__PURE__*/React.createElement(\"div\",{className:\"Step-form\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Steps: \"),this.state.recipe.steps.map(function(step,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",key:index},/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:10},/*#__PURE__*/React.createElement(\"textarea\",{type:\"Steps\",required:true,className:\"form-control\",value:step,onChange:function onChange(e){return _this2.onChangeSteps(e,index);}})),/*#__PURE__*/React.createElement(Col,{className:\"col\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",id:\"remove-step\",className:\"btn btn-outline-primary\",onClick:function onClick(e){return _this2.onChangeRemoveSteps(index);}},\"Remove\")));})),/*#__PURE__*/React.createElement(\"div\",{className:\"AddSteps-btn\"},/*#__PURE__*/React.createElement(\"button\",{id:\"add-step\",className:\"btn btn-outline-primary\",type:\"button\",onClick:this.addStepsRow},\"Add Steps\")),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"label\",null,\"Please upload a picture of your recipe if you want to update: \"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{alt:\"recipe\",className:\"Image\",src:this.state.recipe.imageUrl}),/*#__PURE__*/React.createElement(ImageUploader,{withIcon:false,withPreview:true,singleImage:true,buttonText:\"Upload a picture for your recipe\",onChange:this.onImageUpload,imgExtension:['.jpg','.png','.JPG','.PNG'],maxFileSize:5242880}))),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"Submit\",onSubmit:this.onSubmit,value:\"Update Recipe\",className:\"btn btn-primary\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",id:\"cancel-edit\",className:\"btn btn-primary\",onClick:this.onCancel},\"Cancel\")))));}}]);return EditRecipe;}(Component);export{EditRecipe as default};","map":{"version":3,"sources":["/Users/FrankChen/csc309/tp/team07/client/src/components/editRecipe/editRecipe.component.js"],"names":["React","Component","Navbar","recipe1","Multiselect","Container","Dropdown","ImageUploader","Col","getRecipe","setRecipe","UnitType","categoriesOptions","name","id","EditRecipe","props","assignSelectedCategories","i","state","recipe","categories","length","selectedCategories","push","console","log","ReturnView","e","preventDefault","history","rid","onCancel","onSubmit","onChangeRecipeName","setState","target","value","onChangeDescription","description","onChangeIngredientsName","index","ingredients","onChangeIngredientsQuan","quantity","addIngredientsRow","prevState","unit","onChangeRemoveIngredients","splice","onChangeSteps","steps","addStepsRow","onChangeRemoveSteps","onImageUpload","picture","filePath","concat","onSelect","selectedList","selectedItem","newCategories","onRemove","removedItem","findIndex","element","match","params","file","creatorUsername","creatorId","app","map","ingredient","_onSelect","step","imageUrl"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport './editRecipe.css'\nimport Navbar from \"../Navbar/navbar.component\" \nimport recipe1 from '../../recipes/butter-chicken.jpg'\nimport {Multiselect} from 'multiselect-react-dropdown';\nimport Container from \"@material-ui/core/Container\"\nimport Dropdown from 'react-dropdown';\nimport ImageUploader from 'react-images-upload'; \nimport Col from 'react-bootstrap/Col';\n\nimport {getRecipe, setRecipe} from \"../../actions/recipe\";\n\nconst UnitType = ['(quantity)','kg', 'g','mg', 'cup(s)', 'teaspoon(s)', 'tablespoon(s)', 'mL', 'L', 'oz', 'lb(s)'];\nconst categoriesOptions =[\n    {name: \"Cake\", id: 0},\n    {name: \"Noodles\", id: 1},\n    {name: \"Pie\", id: 2},\n    {name: \"Pizza\", id: 3},\n    {name: \"Salads\", id: 4},\n    {name: \"Sandwiches\", id: 5},\n    {name: \"Seafood\", id: 6},\n    {name: \"Soup\", id: 7}\n]; \nexport default class EditRecipe extends Component {\n    constructor(props){\n        super(props);\n\n        this.props.history.push('/editrecipe/'+this.props.match.params.rid)\n        // requires server call to fetch the recipe information\n        this.state = {\n            rid: this.props.match.params.rid,\n            recipe:{\n                name: \"\",\n                description: \"\",\n                categories: [],\n                ingredients: [{name:\"\", quantity:\"\", unit: \"\"}],\n                steps:[\"\"],\n                file:{},\n                filePath: \"\",\n                creatorUsername: \"\",\n                creatorId: \"\"\n            },\n            selectedCategories:[]\n        }\n        getRecipe(this, this.props.match.params.rid)\n    }\n\n    componentDidMount() {\n        // this is where the server calls are invoked\n        // state variable is updated hereexport\n    }\n\n    assignSelectedCategories=()=>{\n        for(var i=0; i<this.state.recipe.categories.length; i++){\n            this.state.selectedCategories.push(categoriesOptions[this.state.recipe.categories[i]])\n            console.log(this.state.selectedCategories)\n        }\n    }\n\n    ReturnView=(e)=>{\n        e.preventDefault();\n        // server calls are required to push the updated recipe to the server\n        this.props.history.push(\"/viewrecipe/\"+this.state.rid)\n    }\n\n    onCancel=(e)=>{\n        e.preventDefault();\n        this.props.history.push(\"/viewrecipe/\"+this.state.rid)\n    }\n\n    onSubmit=(e)=>{\n        e.preventDefault();\n        setRecipe(this.state.rid,this)\n    }\n\n    onChangeRecipeName = (e) =>{\n        e.preventDefault();\n        this.setState({ name: e.target.value });\n    }\n\n    onChangeDescription = (e) =>{\n        e.preventDefault();\n        this.setState({ description: e.target.value });\n    }\n\n    onChangeIngredientsName = (e,index)=>{\n        let ingredients = this.state.recipe.ingredients;\n        ingredients[index].name = e.target.value;\n        this.setState({ ingredients: ingredients });\n    }\n\n    onChangeIngredientsQuan=(e,index)=>{\n        let ingredients = this.state.recipe.ingredients;\n        ingredients[index].quantity = e.target.value;\n        this.setState({ ingredients: ingredients });\n    }\n\n    addIngredientsRow=()=>{\n       this.setState((prevState)=>({ingredients:[...prevState.ingredients, {name: \"\", quantity:\"\", unit:\"\"}],\n        }));\n    }\n\n    onChangeRemoveIngredients=(index)=>{\n        this.state.recipe.ingredients.splice(index,1);\n        this.setState({ingredients: this.state.recipe.ingredients})\n    }\n\n    onChangeSteps=(e,index)=>{\n        let steps = this.recipe.state.steps;\n        steps[index] = e.target.value;\n        this.setState({ steps: steps });\n    }\n\n    addStepsRow=()=>{\n        this.setState((prevState)=>({steps:[...prevState.steps, \"\"],\n        }));\n    }\n\n    onChangeRemoveSteps=(index)=>{\n        this.state.recipe.steps.splice(index,1);\n        this.setState({steps: this.state.recipe.steps})\n    }\n\n    onImageUpload=(picture)=>{\n        this.setState({filePath: this.state.recipe.filePath.concat(picture)});\n    }\n\n    onSelect=(selectedList, selectedItem)=>{\n        const newCategories = this.state.recipe.categories;\n        newCategories.push(selectedItem.id);\n        this.setState({categories: newCategories})\n        console.log(this.state.recipe.categories)\n    }\n     \n    onRemove=(selectedList, removedItem)=>{\n        const index = this.state.recipe.categories.findIndex((element) => element === removedItem.id)\n        this.state.recipe.categories.splice(index,1);\n        this.setState({categories: this.state.recipe.categories})\n    }\n\n    render(){\n        const { app } = this.props;\n\n        return(\n            <div> \n            <Container maxWidth='md'>\n                <Navbar app={app}/>\n                <form onSubmit={this.ReturnView} className=\"edit-recipe\">\n                    <b>Edit Your Recipe</b>\n                    <div className=\"form-group\">\n                    <label> Recipe Name: </label>\n                        <input \n                            type = \"Name\" \n                            required \n                            className = \"form-control\" \n                            value = {this.state.recipe.name} \n                            onChange={this.onChangeRecipeName}\n                        />\n                    </div>\n                    <div className = \"Recipe-form\">\n                        <label> Recipe Description: </label>\n                        <input \n                            type = \"Description\" \n                            placeholder=\"optional\" \n                            className = \"form-control\" \n                            value = {this.state.recipe.description} \n                            onChange={this.onChangeDescription}\n                        />\n                    </div>\n                    <div className=\"Recipe-form\">\n                        <label>Cuisine Type: </label>\n                        <Multiselect\n                            placeholder = \"Select cuisine type(s)\"\n                            options={categoriesOptions} \n                            selectedValues={this.state.selectedCategories}\n                            onSelect={this.onSelect} \n                            onRemove={this.onRemove} \n                            displayValue=\"name\" \n                        />\n                    </div>\n                    <div className = \"Ingredient-form\" >\n                        <label> Recipe Ingredients: </label>\n                        {\n                            this.state.recipe.ingredients.map((ingredient, index) => {\n                                return(\n                                    <div className=\"row\" id=\"Ingredient-row\" key={index}>\n                                        <Col className=\"col\" xs={5}>\n                                            <input \n                                                type = \"ingredients\" \n                                                required \n                                                placeholder=\"name\"\n                                                className = \"form-control\"\n                                                value = {ingredient.name} \n                                                onChange={(e)=>this.onChangeIngredientsName(e,index)}\n                                            />\n                                        </Col>\n                                        <Col className=\"col\" xs={2}>\n                                            <input \n                                                type = \"Ingredients\" \n                                                required \n                                                placeholder=\"quantity\"\n                                                className = \"form-control\" \n                                                value = {ingredient.quantity} \n                                                onChange={(e)=>this.onChangeIngredientsQuan(e,index)}\n                                            />\n                                        </Col>\n                                        <Col className=\"col\" xs={3}>\n                                            <Dropdown\n                                                className = \"UnitSelector\"\n                                                options={UnitType} \n                                                onChange={this._onSelect} \n                                                value={ingredient.unit} \n                                            />\n                                        </Col>\n                                        <Col className =\"col\" xs={1}>\n                                            <button \n                                                type=\"button\"\n                                                id=\"remove-ingredient\"\n                                                className = \"btn btn-outline-primary\" \n                                                onClick={(e)=>this.onChangeRemoveIngredients(index)}>Remove</button>\n                                        </Col>\n                                    </div>\n                                )})\n                        } \n                    </div>\n                    <div className=\"AddIngredient-btn\">\n                        <button id=\"add-ingredient\" className = \"btn btn-outline-primary\" type = \"button\" onClick={this.addIngredientsRow} >\n                            Add Ingredients\n                        </button>\n                    </div>\n                    <div className = \"Step-form\">\n                        <label> Recipe Steps: </label>\n                        {\n                            this.state.recipe.steps.map((step, index) => {\n                                return(\n                                    <div className=\"row\" key={index}>\n                                        <Col className = \"col\" xs = {10}>\n                                            <textarea \n                                                type = \"Steps\" \n                                                required \n                                                className = \"form-control\" \n                                                value = {step} \n                                                onChange={(e)=>this.onChangeSteps(e,index)}\n                                            />\n                                        </Col>\n                                        <Col className =\"col\">\n                                            <button \n                                                type=\"button\"\n                                                id=\"remove-step\"\n                                                className = \"btn btn-outline-primary\" \n                                                onClick={(e)=>this.onChangeRemoveSteps(index)}>Remove</button>\n                                        </Col>\n                                    </div>\n                                )})\n                        }\n                    </div>\n                    <div className=\"AddSteps-btn\">\n                        <button id = \"add-step\" className = \"btn btn-outline-primary\" type = \"button\" onClick={this.addStepsRow} >\n                            Add Steps\n                        </button> \n                    </div>\n                    <div className = \"Recipe-form\">\n                        <label>Please upload a picture of your recipe if you want to update: </label>\n                        <div>\n                            <img alt=\"recipe\" className=\"Image\" src={this.state.recipe.imageUrl} /> \n                            <ImageUploader\n                                withIcon = {false}\n                                withPreview = {true}\n                                singleImage = {true}\n                                buttonText = 'Upload a picture for your recipe'\n                                onChange={this.onImageUpload}\n                                imgExtension={['.jpg', '.png', '.JPG', '.PNG']}\n                                maxFileSize={5242880}\n                            />\n                        </div>\n                    </div>\n                    <div className = \"Recipe-form\">\n                        <input \n                            type = \"Submit\" \n                            onSubmit = {this.onSubmit}\n                            value = \"Update Recipe\" \n                            className = \"btn btn-primary\"\n                        />\n                        <button \n                            type=\"button\"\n                            id=\"cancel-edit\"\n                            className = \"btn btn-primary\" \n                            onClick={this.onCancel}>Cancel</button>\n                    </div>\n                </form>\n            </Container>\n            </div>  \n        )\n    }\n} "]},"metadata":{},"sourceType":"module"}