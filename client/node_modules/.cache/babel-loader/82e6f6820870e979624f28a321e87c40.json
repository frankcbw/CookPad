{"ast":null,"code":"// send a request to check if a user is logged in through the session cookie\nexport var checkSession=function checkSession(app){var url=\"/users/check-session\";fetch(url).then(function(res){if(res.status===200){return res.json();}}).then(function(json){if(json&&json.currentUser){app.setState({currentUser:json.currentUser});}}).catch(function(error){console.log(error);});};// a function to send a POST request with the user to be logged in\nexport var login=function login(loginComp,app){// create our request constructor with all the parameters we need\nvar request=new Request(\"users/login\",{method:\"post\",body:JSON.stringify(loginComp.state),headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});// send the request with fetch()\nfetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);if(json.currentUser!==undefined){app.setState({currentUser:json.currentUser});}}).catch(function(error){alert(\"Username does not exist or Password does not match!\");console.log(error);});};// A function to send a GET request to logout the current user\nexport var logout=function logout(app){var url=\"/users/logout\";fetch(url).then(function(res){app.setState({currentUser:null,message:{type:\"\",body:\"\"}});}).catch(function(error){console.log(error);});};export var signup=function signup(signupComp){// create our request constructor with all the parameters we need\nvar request=new Request(\"/api/users\",{method:\"post\",body:JSON.stringify(signupComp.state),headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});// send the request with fetch()\nfetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);alert(\"Sign up success!\");}).catch(function(error){alert(\"Could not Sign up!\");console.log(error);});};export var getUser=function getUser(viewProfileComp){var request=new Request(\"/api/users/\".concat(viewProfileComp.state.uid),{method:\"get\",headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);viewProfileComp.setState({user:json});}).catch(function(error){console.log(error);});};// export const getRecipes = ()","map":{"version":3,"sources":["/Users/FrankChen/csc309/tp/team07/client/src/actions/user.js"],"names":["checkSession","app","url","fetch","then","res","status","json","currentUser","setState","catch","error","console","log","login","loginComp","request","Request","method","body","JSON","stringify","state","headers","Accept","undefined","alert","logout","message","type","signup","signupComp","getUser","viewProfileComp","uid","user"],"mappings":"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","sourcesContent":["// send a request to check if a user is logged in through the session cookie\nexport const checkSession = (app) => {\n    const url = \"/users/check-session\";\n    fetch(url)\n        .then(res => {\n            if (res.status === 200) {\n                return res.json();\n            }\n        })\n        .then(json => {\n            if (json && json.currentUser) {\n                app.setState({ currentUser: json.currentUser });\n            }\n        })\n        .catch(error => {\n            console.log(error);\n        });\n};\n\n// a function to send a POST request with the user to be logged in\nexport const login = (loginComp, app) => {\n    // create our request constructor with all the parameters we need\n    const request = new Request(\"users/login\", {\n        method: \"post\",\n        body: JSON.stringify(loginComp.state),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\"\n        }\n    })\n\n    // send the request with fetch()\n    fetch(request)\n        .then(res=>{\n            if(res.status === 200){\n                return res.json();\n            }\n        })\n        .then(json=>{\n            console.log(json)\n            if(json.currentUser !== undefined){\n                app.setState({ currentUser: json.currentUser })\n            }\n        })\n        .catch(error=>{\n            alert(\"Username does not exist or Password does not match!\");\n            console.log(error);\n        })\n}\n\n// A function to send a GET request to logout the current user\nexport const logout = (app) => {\n    const url = \"/users/logout\";\n\n    fetch(url)\n        .then(res => {\n            app.setState({\n                currentUser: null,\n                message: { type: \"\", body: \"\" }\n            });\n        })\n        .catch(error => {\n            console.log(error);\n        });\n};\n\nexport const signup = (signupComp) => {\n    // create our request constructor with all the parameters we need\n    const request = new Request(\"/api/users\", {\n        method: \"post\",\n        body: JSON.stringify(signupComp.state),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\"\n        }\n    })\n\n    // send the request with fetch()\n    fetch(request)\n        .then(res=>{\n            if(res.status === 200){\n                return res.json();\n            }\n        })\n        .then(json=>{\n            console.log(json)\n            alert(\"Sign up success!\");\n        })\n        .catch(error=>{\n            alert(\"Could not Sign up!\");\n            console.log(error);\n        })\n}\n\nexport const getUser = (viewProfileComp) => {\n    const request = new Request(`/api/users/${viewProfileComp.state.uid}`, {\n        method: \"get\",\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\"\n        }\n    })\n\n    fetch(request)\n        .then(res=>{\n            if(res.status === 200){\n                return res.json();\n            }\n        })\n        .then(json=>{\n            console.log(json)\n            viewProfileComp.setState({user: json})\n            \n        })\n        .catch(error=>{\n            console.log(error);\n        })\n}\n\n// export const getRecipes = ()"]},"metadata":{},"sourceType":"module"}