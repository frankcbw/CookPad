{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{uid}from\"react-uid\";import Table from'@material-ui/core/Table';import TableBody from'@material-ui/core/TableBody';import TableHead from'@material-ui/core/TableHead';import TableRow from'@material-ui/core/TableRow';import TableCell from'@material-ui/core/TableCell';import{withStyles}from'@material-ui/core/styles';import\"./userlist.css\";import App from'../../../App';import{deleteUser,promoteUser,getAllUser}from'../../../actions/user';var styles={head:{fontSize:'16pt',fontWeight:400}};var UserList=/*#__PURE__*/function(_Component){_inherits(UserList,_Component);var _super=_createSuper(UserList);function UserList(props){var _this;_classCallCheck(this,UserList);_this=_super.call(this,props);_this.onViewProfile=function(e,uid){e.preventDefault();_this.props.history.push(\"/viewprofile/\".concat(uid));};_this.state={users:[]};getAllUser(_assertThisInitialized(_this));return _this;}_createClass(UserList,[{key:\"onDelete\",value:function onDelete(e,uid){e.preventDefault();if(window.confirm('Please confirm to delete this user?')){// requires server call to change the banned field of the user\nvar newUsers=this.state.users.filter(function(user){return user._id!==uid;});deleteUser(uid);this.setState({users:newUsers});}}},{key:\"onPromote\",value:function onPromote(e,uid){e.preventDefault();if(window.confirm('Please confirm to promote this user?')){// requires server call to change the isAdmin field of the user\nvar newUsers=this.state.users;promoteUser(uid);var _iterator=_createForOfIteratorHelper(newUsers),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var user=_step.value;if(user._id===uid){user.isAdmin=true;break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}this.setState({users:newUsers});}}},{key:\"render\",value:function render(){var _this2=this;var _this$props=this.props,classes=_this$props.classes,app=_this$props.app;return/*#__PURE__*/React.createElement(\"div\",{className:\"user-list\"},/*#__PURE__*/React.createElement(Table,null,/*#__PURE__*/React.createElement(TableHead,{id:\"table-head\"},/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{className:classes.head,align:\"center\"},\"Level\"),/*#__PURE__*/React.createElement(TableCell,{className:classes.head,align:\"center\"},\"Username\"),/*#__PURE__*/React.createElement(TableCell,{className:classes.head,align:\"center\"},\"View Profiles\"),/*#__PURE__*/React.createElement(TableCell,{className:classes.head,align:\"center\"},\"Operations\"))),/*#__PURE__*/React.createElement(TableBody,null,console.log(this.state.users),this.state.users.map(function(user){return/*#__PURE__*/React.createElement(TableRow,{className:\"user_row\",key:uid(user.username)},/*#__PURE__*/React.createElement(TableCell,{className:\"level\",align:\"center\"},user.isAdmin?\"Admin\":\"Standard\"),/*#__PURE__*/React.createElement(TableCell,{className:\"username\",align:\"center\"},user.username),/*#__PURE__*/React.createElement(TableCell,{className:\"Profile\",align:\"center\"},/*#__PURE__*/React.createElement(\"button\",{id:\"view-profile\",className:\"btn btn-outline-primary\",onClick:function onClick(e){return _this2.onViewProfile(e,user._id);}},\"View Profile\")),/*#__PURE__*/React.createElement(TableCell,{className:\"Operations\",align:\"center\"},/*#__PURE__*/React.createElement(\"button\",{id:\"deleteButton\",className:\"btn btn-primary\",onClick:function onClick(e){return _this2.onDelete(e,user._id);}},\" Delete \"),/*#__PURE__*/React.createElement(\"button\",{id:\"promoteButton\",className:\"btn btn-primary\",onClick:function onClick(e){return _this2.onPromote(e,user._id);}},\" Promote \")));}))));}}]);return UserList;}(Component);export default withStyles(styles)(UserList);","map":{"version":3,"sources":["/Users/FrankChen/csc309/tp/team07/client/src/components/adminPage/userlist/userList.component.js"],"names":["React","Component","uid","Table","TableBody","TableHead","TableRow","TableCell","withStyles","App","deleteUser","promoteUser","getAllUser","styles","head","fontSize","fontWeight","UserList","props","onViewProfile","e","preventDefault","history","push","state","users","window","confirm","newUsers","filter","user","_id","setState","isAdmin","classes","app","console","log","map","username","onDelete","onPromote"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { uid } from \"react-uid\";\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow'\nimport TableCell from '@material-ui/core/TableCell';\nimport { withStyles } from '@material-ui/core/styles';\nimport \"./userlist.css\"\nimport App from '../../../App';\nimport {deleteUser, promoteUser, getAllUser} from '../../../actions/user'\n\nconst styles = {\n    head:{\n        fontSize: '16pt',\n        fontWeight: 400,\n    },\n  };\n\nclass UserList extends Component {\n    constructor(props){\n        super(props);\n        this.state= {\n            users : []\n        }\n        getAllUser(this)\n    }\n\n    onViewProfile=(e,uid)=>{\n        e.preventDefault();\n        this.props.history.push(`/viewprofile/${uid}`)\n    }\n\n    onDelete(e, uid){\n        e.preventDefault();\n        if (window.confirm('Please confirm to delete this user?')){\n            // requires server call to change the banned field of the user\n            const newUsers = this.state.users.filter(user=>user._id !== uid)\n            deleteUser(uid)\n            this.setState({users: newUsers})\n        } \n    }\n\n    onPromote(e, uid){\n        e.preventDefault();\n        if (window.confirm('Please confirm to promote this user?')){\n            // requires server call to change the isAdmin field of the user\n            const newUsers = this.state.users\n            promoteUser(uid)\n            for (let user of newUsers){\n                if (user._id === uid){\n                    user.isAdmin = true\n                    break\n                }\n            }\n            this.setState({users: newUsers})\n        } \n    \n        \n    }\n\n\n    render() {\n        const {classes, app} = this.props;\n        return(\n            <div className=\"user-list\">\n            <Table>\n                <TableHead id=\"table-head\">\n                    <TableRow>\n                        <TableCell className={classes.head} align = 'center'>Level</TableCell>\n                        <TableCell className={classes.head} align = 'center'>Username</TableCell>\n                        <TableCell className={classes.head} align = 'center'>View Profiles</TableCell>\n                        <TableCell className={classes.head} align = 'center'>Operations</TableCell>\n                    </TableRow>\n                </TableHead>\n                    <TableBody>\n                        {console.log(this.state.users)}\n                        {this.state.users.map(user => (\n                        <TableRow className=\"user_row\" key={uid(user.username)}>\n                            <TableCell className = \"level\" align = 'center'>\n                                {user.isAdmin ? \"Admin\":\"Standard\"}\n                            </TableCell>\n                            <TableCell className = \"username\" align = 'center'>\n                                {user.username}\n                            </TableCell>\n                            <TableCell className = \"Profile\" align = 'center'>\n                                <button id=\"view-profile\" className=\"btn btn-outline-primary\" onClick={(e)=>this.onViewProfile(e,user._id)}>View Profile</button>  \n                            </TableCell>\n                            <TableCell className = \"Operations\" align = 'center'>\n                                <button id = \"deleteButton\" className=\"btn btn-primary\" onClick={(e)=>this.onDelete(e, user._id)}> Delete </button>\n                                <button id = \"promoteButton\" className=\"btn btn-primary\" onClick={(e)=>this.onPromote(e, user._id)}> Promote </button>\n                            </TableCell>\n                        </TableRow>\n                        ))}\n                    </TableBody>\n            </Table>\n            </div>\n        )\n    }\n}\n\nexport default withStyles(styles)(UserList);"]},"metadata":{},"sourceType":"module"}