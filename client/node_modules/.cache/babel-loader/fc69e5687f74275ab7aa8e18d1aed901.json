{"ast":null,"code":"import _regeneratorRuntime from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/FrankChen/csc309/tp/team07/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from\"axios\";import'./addRecipe.css';import Navbar from\"../Navbar/navbar.component\";import Dropdown from'react-dropdown';import Container from\"@material-ui/core/Container\";import{Multiselect}from'multiselect-react-dropdown';import ImageUploader from'react-images-upload';import'react-dropdown/style.css';import Col from'react-bootstrap/Col';var UnitType=['(quantity)','kg','g','mg','cup(s)','teaspoon(s)','tablespoon(s)','mL','L','oz','lb(s)'];var defaultUnit=UnitType[0];var AddRecipe=/*#__PURE__*/function(_Component){_inherits(AddRecipe,_Component);var _super=_createSuper(AddRecipe);function AddRecipe(props){var _this;_classCallCheck(this,AddRecipe);_this=_super.call(this,props);_this.onChangeRecipeName=function(e){e.preventDefault();_this.setState({name:e.target.value});};_this.onChangeDescription=function(e){e.preventDefault();_this.setState({description:e.target.value});};_this.onChangeIngredientsName=function(e,index){var newIngredients=_this.state.ingredients;newIngredients[index].name=e.target.value;_this.setState({ingredients:newIngredients});};_this.onChangeIngredientsQuan=function(e,index){var NewIngredients=_this.state.ingredients;NewIngredients[index].quantity=e.target.value;_this.setState({ingredients:NewIngredients});};_this.addIngredientsRow=function(){_this.setState(function(prevState){return{ingredients:[].concat(_toConsumableArray(prevState.ingredients),[{name:\"\",age:\"\",unit:\"\"}])};});};_this.onChangeRemoveIngredients=function(index){var NewIngredients=_this.state.ingredients;NewIngredients.splice(index,1);_this.setState({ingredients:NewIngredients});};_this.onChangeSteps=function(e,index){var newSteps=_this.state.steps;newSteps[index]=e.target.value;_this.setState({steps:newSteps});};_this.addStepsRow=function(){_this.setState(function(prevState){return{steps:[].concat(_toConsumableArray(prevState.steps),[\"\"])};});};_this.onChangeRemoveSteps=function(index){_this.state.steps.splice(index,1);_this.setState({steps:_this.state.steps});};_this.onImageUpload=function(picture){_this.setState({RecipeImage:_this.state.RecipeImage.concat(picture)});};_this.onSelect=function(selectedList){_this.setState({selectedCategories:selectedList});console.log(_this.state.selectedCategories);};_this.onRemove=function(selectedList){_this.setState({selectedCategories:selectedList});};_this.onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData,res1,filePath,recipe,res2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();formData=new FormData();formData.append('file',_this.state.RecipeImage[0]);_context.prev=3;_context.next=6;return axios.post('/upload',formData,{headers:{'Content-Type':'multipart/form-data'}});case 6:res1=_context.sent;filePath=res1.data.filePath;recipe={name:_this.state.name,description:_this.state.description,categories:[0,1,2],// TODO: change this later\ncreator:_this.props.app.state.currentUser._id,steps:_this.state.steps,ingredients:_this.state.ingredients,filePath:filePath};_context.next=11;return axios.post('/api/recipes',recipe);case 11:res2=_context.sent;console.log(res2);_context.next=18;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](3);if(_context.t0.response.status===500){console.log('There was a problem with the server');}else{console.log(_context.t0);}case 18:// push the recipe to the server, use the filepath and filename\n_this.props.history.push(\"/homepage\");case 19:case\"end\":return _context.stop();}}},_callee,null,[[3,15]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.props.history.push(\"/addrecipe\");_this.state={name:'',description:'',ingredients:[{name:\"\",quantity:\"\",unit:\"\"}],steps:[],RecipeImage:[],selectedCategories:[],categories:[{name:\"Cake\",id:0},{name:\"Noodles\",id:1},{name:\"Pie\",id:2},{name:\"Pizza\",id:3},{name:\"Salads\",id:4},{name:\"Sandwiches\",id:5},{name:\"Seafood\",id:6},{name:\"Soup\",id:7}]};return _this;}_createClass(AddRecipe,[{key:\"render\",value:function render(){var _this2=this;var app=this.props.app;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Container,{maxWidth:\"md\"},/*#__PURE__*/React.createElement(Navbar,{app:app}),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.onSubmit,className:\"add-recipe\"},/*#__PURE__*/React.createElement(\"b\",null,\"Create A Recipe\"),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Name: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"Name\",required:true,placeholder:\"Your Recipe Name\",className:\"form-control\",value:this.state.name,onChange:this.onChangeRecipeName})),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Description: \"),/*#__PURE__*/React.createElement(\"input\",{type:\"Description\",placeholder:\"optional\",className:\"form-control\",value:this.state.description,onChange:this.onChangeDescription})),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"label\",null,\"Cuisine Type: \"),/*#__PURE__*/React.createElement(Multiselect,{placeholder:\"Select cuisine type(s)\",options:this.state.categories,selectedValues:this.state.selectedValue,onSelect:this.onSelect,onRemove:this.onRemove,displayValue:\"name\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"Ingredient-form\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Ingredients: \"),this.state.ingredients.map(function(Ingredient,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",id:\"Ingredient-row\",key:index},/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:5},/*#__PURE__*/React.createElement(\"input\",{type:\"Ingredients\",required:true,placeholder:\"name\",className:\"form-control\",value:Ingredient.name,onChange:function onChange(e){return _this2.onChangeIngredientsName(e,index);}})),/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:2},/*#__PURE__*/React.createElement(\"input\",{type:\"Ingredients\",required:true,placeholder:\"quantity\",className:\"form-control\",value:Ingredient.quantity,onChange:function onChange(e){return _this2.onChangeIngredientsQuan(e,index);}})),/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:3},/*#__PURE__*/React.createElement(Dropdown,{className:\"UnitSelector\",options:UnitType,onChange:_this2._onSelect,placeholder:defaultUnit,value:Ingredient.unit})),/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:1},/*#__PURE__*/React.createElement(\"button\",{id:\"remove-ingredient\",type:\"button\",className:\"btn btn-outline-primary\",onClick:function onClick(e){return _this2.onChangeRemoveIngredients(index);}},\"Remove\")));})),/*#__PURE__*/React.createElement(\"div\",{className:\"AddIngredient-btn\"},/*#__PURE__*/React.createElement(\"button\",{id:\"add-ingredient\",className:\"btn btn-outline-primary\",type:\"button\",onClick:this.addIngredientsRow},\"Add Ingredients\")),/*#__PURE__*/React.createElement(\"div\",{className:\"Step-form\"},/*#__PURE__*/React.createElement(\"label\",null,\" Recipe Steps: \"),this.state.steps.map(function(step,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"row\",key:index},/*#__PURE__*/React.createElement(Col,{className:\"col\",xs:10},/*#__PURE__*/React.createElement(\"textarea\",{type:\"Steps\",required:true,placeholder:\"Enter a step\",className:\"form-control\",value:step,onChange:function onChange(e){return _this2.onChangeSteps(e,index);}})),/*#__PURE__*/React.createElement(Col,{className:\"col\"},/*#__PURE__*/React.createElement(\"button\",{id:\"remove-step\",type:\"button\",className:\"btn btn-outline-primary\",onClick:function onClick(e){return _this2.onChangeRemoveSteps(index);}},\"Remove\")));})),/*#__PURE__*/React.createElement(\"div\",{className:\"AddSteps-btn\"},/*#__PURE__*/React.createElement(\"button\",{id:\"add-step\",className:\"btn btn-outline-primary\",type:\"button\",onClick:this.addStepsRow},\"Add Steps\")),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"label\",null,\"Please upload a picture of your recipe: \"),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ImageUploader,{withIcon:false,withPreview:true,singleImage:true,buttonText:\"Upload a picture for your recipe\",onChange:this.onImageUpload,imgExtension:['.jpg','.png','.JPG','.PNG'],maxFileSize:5242880}))),/*#__PURE__*/React.createElement(\"div\",{className:\"Recipe-form\"},/*#__PURE__*/React.createElement(\"input\",{type:\"Submit\",value:\"Submit New Recipe\",className:\"btn btn-primary\"})))));}}]);return AddRecipe;}(Component);export{AddRecipe as default};","map":{"version":3,"sources":["/Users/FrankChen/csc309/tp/team07/client/src/components/addRecipe/addRecipe.component.js"],"names":["React","Component","axios","Navbar","Dropdown","Container","Multiselect","ImageUploader","Col","UnitType","defaultUnit","AddRecipe","props","onChangeRecipeName","e","preventDefault","setState","name","target","value","onChangeDescription","description","onChangeIngredientsName","index","newIngredients","state","ingredients","onChangeIngredientsQuan","NewIngredients","quantity","addIngredientsRow","prevState","age","unit","onChangeRemoveIngredients","splice","onChangeSteps","newSteps","steps","addStepsRow","onChangeRemoveSteps","onImageUpload","picture","RecipeImage","concat","onSelect","selectedList","selectedCategories","console","log","onRemove","onSubmit","formData","FormData","append","post","headers","res1","filePath","data","recipe","categories","creator","app","currentUser","_id","res2","response","status","history","push","id","selectedValue","map","Ingredient","_onSelect","step"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport axios from \"axios\";\nimport './addRecipe.css'\nimport Navbar from \"../Navbar/navbar.component\";\nimport Dropdown from 'react-dropdown';\nimport Container from \"@material-ui/core/Container\"\nimport {Multiselect} from 'multiselect-react-dropdown';\nimport ImageUploader from 'react-images-upload';\nimport 'react-dropdown/style.css';\nimport Col from 'react-bootstrap/Col';\n\nconst UnitType = ['(quantity)','kg', 'g','mg', 'cup(s)', 'teaspoon(s)', 'tablespoon(s)', 'mL', 'L', 'oz', 'lb(s)'];\n\nconst defaultUnit = UnitType[0];\n\nexport default class AddRecipe extends Component {\n    constructor(props){\n        super(props);\n        this.props.history.push(\"/addrecipe\");\n        this.state = {\n            name: '',\n            description: '',\n            ingredients: [{name:\"\", quantity:\"\", unit:\"\"}],\n            steps:[],\n            RecipeImage: [],\n            selectedCategories:[],\n            categories :[\n                {name: \"Cake\", id: 0},\n                {name: \"Noodles\", id: 1},\n                {name: \"Pie\", id: 2},\n                {name: \"Pizza\", id: 3},\n                {name: \"Salads\", id: 4},\n                {name: \"Sandwiches\", id: 5},\n                {name: \"Seafood\", id: 6},\n                {name: \"Soup\", id: 7}\n            ]\n        }\n    }\n\n    onChangeRecipeName = (e) =>{\n        e.preventDefault();\n        this.setState({ name: e.target.value });\n    }\n\n    onChangeDescription = (e) =>{\n        e.preventDefault();\n        this.setState({ description: e.target.value });\n    }\n\n    onChangeIngredientsName = (e,index)=>{\n        const newIngredients = this.state.ingredients;\n        newIngredients[index].name = e.target.value;\n        this.setState({ ingredients: newIngredients });\n    }\n\n    onChangeIngredientsQuan=(e,index)=>{\n        const NewIngredients = this.state.ingredients;\n        NewIngredients[index].quantity = e.target.value;\n        this.setState({ ingredients: NewIngredients });\n    }\n\n    addIngredientsRow=()=>{\n       this.setState((prevState)=>({ingredients:[...prevState.ingredients, {name: \"\", age:\"\", unit:\"\"}],\n        }));\n    }\n\n    onChangeRemoveIngredients=(index)=>{\n        const NewIngredients = this.state.ingredients\n        NewIngredients.splice(index,1);\n        this.setState({ingredients: NewIngredients})\n    }\n\n    onChangeSteps=(e,index)=>{\n        const newSteps = this.state.steps;\n        newSteps[index] = e.target.value;\n        this.setState({ steps: newSteps });\n    }\n\n    addStepsRow=()=>{\n        this.setState((prevState)=>({steps:[...prevState.steps, \"\"],\n        }));\n    }\n\n    onChangeRemoveSteps=(index)=>{\n        this.state.steps.splice(index,1);\n        this.setState({steps: this.state.steps})\n    }\n\n    onImageUpload=(picture)=>{\n        this.setState({RecipeImage: this.state.RecipeImage.concat(picture)});\n    }\n\n    onSelect=(selectedList)=>{\n        this.setState({selectedCategories: selectedList})\n        console.log(this.state.selectedCategories)\n    }\n     \n    onRemove=(selectedList)=>{\n        this.setState({selectedCategories: selectedList})\n    }\n\n    onSubmit=async(e)=>{\n        e.preventDefault();\n        const formData = new FormData();\n        formData.append('file', this.state.RecipeImage[0]);\n\n        try{\n            const res1 = await axios.post('/upload', formData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data'\n                }\n            })\n            const { filePath } = res1.data;\n\n            const recipe = {\n                name: this.state.name,\n                description: this.state.description,\n                categories: [0,1,2], // TODO: change this later\n                creator: this.props.app.state.currentUser._id,\n                steps: this.state.steps,\n                ingredients: this.state.ingredients,\n                filePath: filePath\n            }\n\n            const res2 = await axios.post('/api/recipes', recipe);\n            console.log(res2)\n        }catch(err){\n            if(err.response.status === 500){\n                console.log('There was a problem with the server')\n            } else{\n                console.log(err)\n            }\n        }\n        // push the recipe to the server, use the filepath and filename\n        \n        this.props.history.push(\"/homepage\");\n    }\n\n    render(){ \n        const { app } = this.props;\n\n        return(\n            <div>\n            <Container maxWidth='md'>\n                <Navbar app={app}/>\n                <form onSubmit = {this.onSubmit} className=\"add-recipe\">\n                    <b>Create A Recipe</b>\n                    <div className = \"Recipe-form\">\n                        <label> Recipe Name: </label>\n                        <input \n                            type = \"Name\" \n                            required \n                            placeholder=\"Your Recipe Name\" \n                            className = \"form-control\" \n                            value = {this.state.name} \n                            onChange={this.onChangeRecipeName}\n                        />\n                    </div>\n                    <div className = \"Recipe-form\">\n                        <label> Recipe Description: </label>\n                        <input \n                            type = \"Description\" \n                            placeholder=\"optional\" \n                            className = \"form-control\" \n                            value = {this.state.description} \n                            onChange={this.onChangeDescription}\n                        />\n                    </div>\n                    <div className=\"Recipe-form\">\n                        <label>Cuisine Type: </label>\n                        <Multiselect\n                            placeholder = \"Select cuisine type(s)\"\n                            options={this.state.categories} \n                            selectedValues={this.state.selectedValue} \n                            onSelect={this.onSelect} \n                            onRemove={this.onRemove} \n                            displayValue=\"name\" \n                        />\n                    </div>\n                    <div className = \"Ingredient-form\" >\n                        <label> Recipe Ingredients: </label>\n                         {\n                            this.state.ingredients.map((Ingredient, index) => {\n                                return(\n                                    <div className=\"row\" id=\"Ingredient-row\" key={index}>\n                                        <Col className=\"col\" xs={5}>\n                                            <input \n                                                type = \"Ingredients\" \n                                                required \n                                                placeholder=\"name\"\n                                                className = \"form-control\"\n                                                value = {Ingredient.name} \n                                                onChange={(e)=>this.onChangeIngredientsName(e,index)}\n                                            />\n                                        </Col>\n                                        <Col className=\"col\" xs={2}>\n                                            <input \n                                                type = \"Ingredients\" \n                                                required \n                                                placeholder=\"quantity\"\n                                                className = \"form-control\" \n                                                value = {Ingredient.quantity} \n                                                onChange={(e)=>this.onChangeIngredientsQuan(e,index)}\n                                            />\n                                        </Col>\n                                        <Col className=\"col\" xs={3}>\n                                            <Dropdown\n                                                className = \"UnitSelector\"\n                                                options={UnitType} \n                                                onChange={this._onSelect} \n                                                placeholder ={defaultUnit}\n                                                value={Ingredient.unit} \n                                            />\n                                        </Col>\n                                        <Col className =\"col\" xs={1}>\n                                            <button \n                                                id=\"remove-ingredient\"\n                                                type=\"button\"\n                                                className = \"btn btn-outline-primary\" \n                                                onClick={(e)=>this.onChangeRemoveIngredients(index)}>Remove</button>\n                                        </Col>\n                                    </div>\n                                )})\n                        } \n                    </div>\n                    <div className=\"AddIngredient-btn\">\n                        <button id=\"add-ingredient\" className = \"btn btn-outline-primary\" type = \"button\" onClick={this.addIngredientsRow} >\n                            Add Ingredients\n                        </button>\n                    </div>\n                    <div className = \"Step-form\">\n                        <label> Recipe Steps: </label>\n                        {\n                            this.state.steps.map((step, index) => {\n                                return(\n                                    <div className=\"row\" key={index}>\n                                        <Col className = \"col\" xs = {10}>\n                                            <textarea \n                                                type = \"Steps\" \n                                                required \n                                                placeholder=\"Enter a step\"\n                                                className = \"form-control\" \n                                                value = {step} \n                                                onChange={(e)=>this.onChangeSteps(e,(index))}\n                                            />\n                                        </Col>\n                                        <Col className =\"col\">\n                                            <button \n                                                id=\"remove-step\"\n                                                type=\"button\"\n                                                className = \"btn btn-outline-primary\" \n                                                onClick={(e)=>this.onChangeRemoveSteps(index)}>Remove</button>\n                                        </Col>\n                                    </div>\n                                )})\n                        }\n                        \n                    </div>\n                    <div className=\"AddSteps-btn\">\n                        <button id = \"add-step\" className = \"btn btn-outline-primary\" type = \"button\" onClick={this.addStepsRow} >\n                            Add Steps\n                        </button> \n                    </div>\n                    <div className = \"Recipe-form\">\n                        <label>Please upload a picture of your recipe: </label>\n                        <div>\n                            <ImageUploader\n                                withIcon = {false}\n                                withPreview = {true}\n                                singleImage = {true}\n                                buttonText = 'Upload a picture for your recipe'\n                                onChange={this.onImageUpload}\n                                imgExtension={['.jpg', '.png', '.JPG', '.PNG']}\n                                maxFileSize={5242880}\n                            />\n                        </div>\n                    </div>\n                    <div className = \"Recipe-form\">\n                        <input \n                            type = \"Submit\" \n                            value = \"Submit New Recipe\" \n                            className = \"btn btn-primary\" \n                        />\n                    </div>\n                </form>\n            </Container>\n            </div>\n        )\n    }\n} \n"]},"metadata":{},"sourceType":"module"}