{"ast":null,"code":"export var getMyRecipe=function getMyRecipe(viewProfileComp){var myRecipes=[];console.log(viewProfileComp.state.user);viewProfileComp.state.user.myRecipes.forEach(function(rid){var request=new Request(\"/api/recipes/\".concat(rid),{method:\"get\",headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);myRecipes.push(json);}).catch(function(error){console.log(error);});});viewProfileComp.setState({recipes:myRecipes});};export var getMyCollection=function getMyCollection(viewProfileComp){var myCollectedRecipes=[];console.log(viewProfileComp.state.user.collectedRecipes);viewProfileComp.state.user.collectedRecipes.forEach(function(rid){var request=new Request(\"/api/recipes/\".concat(rid),{method:\"get\",headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);myCollectedRecipes.push(json);}).catch(function(error){console.log(error);});});viewProfileComp.setState({collectedRecipes:myCollectedRecipes});};export var addRecipe=function addRecipe(newRecipeComp){var newRecipe={};newRecipe.creator=newRecipeComp.state.creator;newRecipe.name=newRecipeComp.state.name;newRecipe.ingredients=newRecipeComp.state.ingredients;newRecipe.steps=newRecipeComp.state.steps;newRecipe.description=newRecipeComp.state.description;newRecipe.filePath=newRecipeComp.state.filePath;newRecipe.categories=newRecipeComp.state.categories;console.log(\"state ready to send a request:\");console.log(newRecipe);var request=new Request(\"/api/recipes\",{method:\"post\",body:JSON.stringify(newRecipe),headers:{Accept:\"application/json, text/plain, */*\",'Content-Type':'multipart/form-data'}});// send the request with fetch()\nfetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);alert(\"Added A New Recipe!\");}).catch(function(error){alert(\"Could not Add Recipe!\");console.log(error);});};export var getRecipe=function getRecipe(comp,rid){var request=new Request(\"/api/recipes/\".concat(rid),{method:\"get\",headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);comp.setState({recipe:json});}).catch(function(error){console.log(error);});};export var deleteRecipe=function deleteRecipe(rid){var request=new Request(\"/api/recipes/\".concat(rid),{method:\"delete\",headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);}).catch(function(error){console.log(error);});};export var getAllRecipes=function getAllRecipes(comp){var request=new Request(\"/api/recipes\",{method:\"get\",headers:{Accept:\"application/json, text/plain, */*\",\"Content-Type\":\"application/json\"}});fetch(request).then(function(res){if(res.status===200){return res.json();}}).then(function(json){console.log(json);comp.setState({recipes:json.recipes});comp.setState({displayed_recipes:json.recipes});// update top three recipes\nvar first_largest=-1;var second_largest=-1;var third_largest=-1;var first_idx=-1;var second_idx=-1;var third_idx=-1;for(var i=0;i<json.recipes.length;i++){if(json.recipes[i].likes>first_largest){third_largest=second_largest;second_largest=first_largest;first_largest=json.recipes[i].likes;first_idx=i;}else if(json.recipes[i].likes>second_largest){third_largest=second_largest;second_largest=json.recipes[i].likes;second_idx=i;}else if(json.recipes[i].likes>third_largest){third_largest=json.recipes[i].likes;third_idx=i;}}comp.setState({top3_recipe:[first_idx,second_idx,third_idx]});console.log(comp.state.top3_recipe);}).catch(function(error){console.log(error);});};export var getTopRecipes=function getTopRecipes(){};export var updateLikes=function updateLikes(){};","map":{"version":3,"sources":["/Users/FrankChen/csc309/tp/team07/client/src/actions/recipe.js"],"names":["getMyRecipe","viewProfileComp","myRecipes","console","log","state","user","forEach","rid","request","Request","method","headers","Accept","fetch","then","res","status","json","push","catch","error","setState","recipes","getMyCollection","myCollectedRecipes","collectedRecipes","addRecipe","newRecipeComp","newRecipe","creator","name","ingredients","steps","description","filePath","categories","body","JSON","stringify","alert","getRecipe","comp","recipe","deleteRecipe","getAllRecipes","displayed_recipes","first_largest","second_largest","third_largest","first_idx","second_idx","third_idx","i","length","likes","top3_recipe","getTopRecipes","updateLikes"],"mappings":"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","sourcesContent":["export const getMyRecipe = (viewProfileComp) => {\n    const myRecipes = []\n    console.log(viewProfileComp.state.user)\n    viewProfileComp.state.user.myRecipes.forEach(rid => {\n        const request = new Request(`/api/recipes/${rid}`, {\n            method: \"get\",\n            headers: {\n                Accept: \"application/json, text/plain, */*\",\n                \"Content-Type\": \"application/json\"\n            }\n        })\n    \n        fetch(request)\n            .then(res=>{\n                if(res.status === 200){\n                    return res.json();\n                }\n            })\n            .then(json=>{\n                console.log(json)\n                myRecipes.push(json)\n            })\n            .catch(error=>{\n                console.log(error);\n            })\n        \n    });\n    viewProfileComp.setState({recipes: myRecipes})  \n}\n\nexport const getMyCollection = (viewProfileComp) => {\n    const myCollectedRecipes = []\n    console.log(viewProfileComp.state.user.collectedRecipes)\n    viewProfileComp.state.user.collectedRecipes.forEach(rid => {\n        const request = new Request(`/api/recipes/${rid}`, {\n            method: \"get\",\n            headers: {\n                Accept: \"application/json, text/plain, */*\",\n                \"Content-Type\": \"application/json\"\n            }\n        })\n    \n        fetch(request)\n            .then(res=>{\n                if(res.status === 200){\n                    return res.json();\n                }\n            })\n            .then(json=>{\n                console.log(json)\n                myCollectedRecipes.push(json)\n            })\n            .catch(error=>{\n                console.log(error);\n            })\n        \n    });\n    viewProfileComp.setState({collectedRecipes: myCollectedRecipes})\n}\n\n\nexport const addRecipe = (newRecipeComp) => {\n    const newRecipe = {};\n    newRecipe.creator = newRecipeComp.state.creator;\n    newRecipe.name = newRecipeComp.state.name;\n    newRecipe.ingredients = newRecipeComp.state.ingredients;\n    newRecipe.steps = newRecipeComp.state.steps;\n    newRecipe.description = newRecipeComp.state.description;\n    newRecipe.filePath = newRecipeComp.state.filePath;\n    newRecipe.categories = newRecipeComp.state.categories;\n\n    console.log(\"state ready to send a request:\");\n    console.log(newRecipe);\n\n    const request = new Request(\"/api/recipes\", {\n        method: \"post\",\n        body: JSON.stringify(newRecipe),\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            'Content-Type': 'multipart/form-data'\n        }\n    })\n\n    // send the request with fetch()\n    fetch(request)\n        .then(res=>{\n            if(res.status === 200){\n                return res.json();\n            }\n        })\n        .then(json=>{\n            console.log(json)\n            alert(\"Added A New Recipe!\");\n        })\n        .catch(error=>{\n            alert(\"Could not Add Recipe!\");\n            console.log(error);\n        })\n}\n\nexport const getRecipe = (comp, rid) => {\n    const request = new Request(`/api/recipes/${rid}`, {\n        method: \"get\",\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\"\n        }\n    })\n\n    fetch(request)\n        .then(res=>{\n            if(res.status === 200){\n                return res.json();\n            }\n        })\n        .then(json=>{\n            console.log(json)\n            comp.setState({recipe: json})\n        })\n        .catch(error=>{\n            console.log(error);\n        })\n}\n\nexport const deleteRecipe = (rid) => {\n    const request = new Request(`/api/recipes/${rid}`, {\n        method: \"delete\",\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\"\n        }\n    })\n\n    fetch(request)\n        .then(res=>{\n            if(res.status === 200){\n                return res.json();\n            }\n        })\n        .then(json=>{\n            console.log(json)\n        })\n        .catch(error=>{\n            console.log(error);\n        })\n}\n\nexport const getAllRecipes = (comp)=>{\n    const request = new Request(`/api/recipes`, {\n        method: \"get\",\n        headers: {\n            Accept: \"application/json, text/plain, */*\",\n            \"Content-Type\": \"application/json\"\n        }\n    })\n\n    fetch(request)\n        .then(res=>{\n            if(res.status === 200){\n                return res.json();\n            }\n        })\n        .then(json=>{\n            console.log(json)\n            comp.setState({recipes: json.recipes})\n            comp.setState({displayed_recipes: json.recipes})\n            \n            // update top three recipes\n            let first_largest = -1;\n            let second_largest = -1;\n            let third_largest = -1;\n            let first_idx = -1;\n            let second_idx = -1;\n            let third_idx = -1;\n            for(let i=0; i< json.recipes.length; i++){\n                if(json.recipes[i].likes > first_largest){\n                    third_largest = second_largest;\n                    second_largest = first_largest;\n                    first_largest = json.recipes[i].likes;\n                    first_idx = i;\n                }else if(json.recipes[i].likes > second_largest){\n                    third_largest = second_largest;\n                    second_largest = json.recipes[i].likes;\n                    second_idx = i;\n                }else if(json.recipes[i].likes > third_largest){\n                    third_largest = json.recipes[i].likes;\n                    third_idx = i;\n                }\n            }\n            comp.setState({ top3_recipe: [first_idx, second_idx, third_idx]})\n            console.log(comp.state.top3_recipe)\n        })\n        .catch(error=>{\n            console.log(error);\n        })\n}\n\nexport const getTopRecipes = ()=>{\n\n}\n\nexport const updateLikes = ()=>{\n\n}\n"]},"metadata":{},"sourceType":"module"}